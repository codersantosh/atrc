{"version":3,"names":["__","sprintf","useEffect","useState","classNames","AtrcUniqueID","AtrcGoogleMap","id","apiKey","loc","lat","lng","zoom","mapTypeId","draggable","typeCtrl","zoomCtrl","fullScreenCtrl","streetViewCtrl","markers","mapStyle","mapStyleCust","className","onChange","defaultProps","mapID","scriptLoaded","setScriptLoaded","msg","setMessage","gMap","scriptId","document","getElementById","window","google","script","createElement","src","defer","async","onload","head","appendChild","addInfoWindow","marker","markerId","title","description","contentString","infowindow","maps","InfoWindow","content","addListener","open","cycleMarkers","newMarkers","length","forEach","latitude","longitude","position","LatLng","mark","Marker","map","e4Draggable","event","newLat","latLng","newLng","markersCloned","newMaker","Number","desc","Map","center","gestureHandling","request","query","fields","service","places","PlacesService","findPlaceFromQuery","results","status","PlacesServiceStatus","OK","setCenter","geometry","newZoom","getZoom","newMapTypeId","getMapTypeId","location","getCenter","toString","React","_extends","encodeURIComponent","frameBorder"],"sources":["D:/wamp/www/atrc-package/atrc/packages/atoms/map-google/index.js"],"sourcesContent":["/* WordPress */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\n/* Library */\r\nimport classNames from 'classnames';\r\n\r\n/* Inbuilt */\r\nimport AtrcUniqueID from '../../utils/unique-id';\r\n\r\n/* Local */\r\nconst AtrcGoogleMap = ({\r\n\tid,\r\n\tapiKey,\r\n\tloc = 'Gorkh Durbar',\r\n\tlat,\r\n\tlng,\r\n\tzoom = 15,\r\n\tmapTypeId = 'roadmap',\r\n\tdraggable,\r\n\ttypeCtrl,\r\n\tzoomCtrl,\r\n\tfullScreenCtrl,\r\n\tstreetViewCtrl,\r\n\tmarkers,\r\n\tmapStyle,\r\n\tmapStyleCust,\r\n\tclassName = '',\r\n\tonChange = () => {},\r\n\t...defaultProps\r\n}) => {\r\n\tconst mapID = id || AtrcUniqueID();\r\n\tconst [scriptLoaded, setScriptLoaded] = useState(false);\r\n\tconst [msg, setMessage] = useState(\r\n\t\tapiKey ? __('Script is not loaded', 'atrc-prefix-atrc') : ''\r\n\t);\r\n\r\n\tlet gMap;\r\n\r\n\t/* Load script */\r\n\tuseEffect(() => {\r\n\t\tif (!apiKey) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst scriptId = 'atrc-prefix-atrc-google-map-api';\r\n\r\n\t\tif (\r\n\t\t\t!document.getElementById(scriptId) &&\r\n\t\t\ttypeof window.google === 'undefined'\r\n\t\t) {\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}`;\r\n\t\t\tscript.defer = true;\r\n\t\t\tscript.async = true;\r\n\t\t\tscript.id = scriptId;\r\n\t\t\t// Add onload function to script\r\n\t\t\tscript.onload = function () {\r\n\t\t\t\tsetScriptLoaded(true);\r\n\t\t\t};\r\n\t\t\t// Append script element to the document.\r\n\t\t\tdocument.head.appendChild(script);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tfunction addInfoWindow(marker, markerId, title, description) {\r\n\t\tconst contentString = `<div class=\"at-map-overview\"><h6 class=\"at-map-overview-title\">${title}</h6><div class=\"at-map-overview-content\">${\r\n\t\t\tdescription ? `<p>${description}</p>` : ''\r\n\t\t}<a class=\"at-map-overview-delete\" onclick=\"removeMarker( '${markerId}' )\">${__(\r\n\t\t\t'Delete Marker',\r\n\t\t\t'atrc-prefix-atrc'\r\n\t\t)}</a></div></div>`;\r\n\r\n\t\t// eslint-disable-next-line no-undef\r\n\t\tconst infowindow = new google.maps.InfoWindow({\r\n\t\t\tcontent: contentString,\r\n\t\t});\r\n\r\n\t\tmarker.addListener('click', () => {\r\n\t\t\tinfowindow.open(gMap, marker);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction cycleMarkers(newMarkers) {\r\n\t\tif (newMarkers && 0 < newMarkers.length) {\r\n\t\t\tnewMarkers.forEach((marker) => {\r\n\t\t\t\tconst latitude = marker.lat;\r\n\t\t\t\tconst longitude = marker.lng;\r\n\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\tconst position = new google.maps.LatLng(latitude, longitude);\r\n\r\n\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\tconst mark = new google.maps.Marker({\r\n\t\t\t\t\tposition,\r\n\t\t\t\t\tmap: gMap,\r\n\t\t\t\t\ttitle: marker.title,\r\n\t\t\t\t\te4Draggable: true,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\tgoogle.maps.event.addListener(mark, 'dragend', (event) => {\r\n\t\t\t\t\tconst newLat = event.latLng.lat();\r\n\t\t\t\t\tconst newLng = event.latLng.lng();\r\n\t\t\t\t\tconst markersCloned = newMarkers.map((newMaker) => {\r\n\t\t\t\t\t\tif (marker.id === Number(newMaker.id)) {\r\n\t\t\t\t\t\t\treturn { ...marker, lat: newLat, lng: newLng };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn marker;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tonChange({ markers: markersCloned });\r\n\t\t\t\t});\r\n\r\n\t\t\t\taddInfoWindow(mark, marker.id, marker.title, marker.desc);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!apiKey) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!scriptLoaded) {\r\n\t\t\tsetMessage(__('Script is not loaded', 'atrc-prefix-atrc'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// eslint-disable-next-line no-undef\r\n\t\tif (typeof google === 'undefined' || google === null) {\r\n\t\t\tsetMessage(__('google is undefined or null', 'atrc-prefix-atrc'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMessage('');\r\n\r\n\t\t/* Init Map */\r\n\t\t// eslint-disable-next-line no-undef\r\n\t\tgMap = new google.maps.Map(document.getElementById(mapID), {\r\n\t\t\tcenter: {\r\n\t\t\t\tlat: Number(lat) || 28.0045,\r\n\t\t\t\tlng: Number(lng) || 84.6284,\r\n\t\t\t},\r\n\t\t\tgestureHandling: 'cooperative',\r\n\t\t\tzoom,\r\n\t\t\tmapTypeId,\r\n\t\t});\r\n\r\n\t\tif (loc && !lat && !lng) {\r\n\t\t\tconst request = {\r\n\t\t\t\tquery: loc,\r\n\t\t\t\tfields: ['name', 'geometry'],\r\n\t\t\t};\r\n\r\n\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\tconst service = new google.maps.places.PlacesService(gMap);\r\n\r\n\t\t\tservice.findPlaceFromQuery(request, (results, status) => {\r\n\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\tif (status === google.maps.places.PlacesServiceStatus.OK) {\r\n\t\t\t\t\tif (0 < results.length) {\r\n\t\t\t\t\t\tgMap.setCenter(results[0].geometry.loc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tgMap.addListener('zoom_changed', () => {\r\n\t\t\tconst newZoom = gMap.getZoom();\r\n\t\t\tonChange({ zoom: newZoom });\r\n\t\t});\r\n\r\n\t\tgMap.addListener('maptypeid_changed', () => {\r\n\t\t\tconst newMapTypeId = gMap.getMapTypeId();\r\n\t\t\tonChange({ mapTypeId: newMapTypeId });\r\n\t\t});\r\n\r\n\t\tgMap.addListener('bounds_changed', () => {\r\n\t\t\tconst location = gMap.getCenter();\r\n\t\t\tif (location) {\r\n\t\t\t\tconst latitude = location.lat();\r\n\t\t\t\tconst longitude = location.lng();\r\n\t\t\t\tonChange({\r\n\t\t\t\t\tlat: latitude.toString(),\r\n\t\t\t\t\tlng: longitude.toString(),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* Markers */\r\n\t\tcycleMarkers(markers);\r\n\t}, [scriptLoaded]);\r\n\r\n\treturn apiKey || msg ? (\r\n\t\t<div\r\n\t\t\tclassName={classNames(className, 'at-map')}\r\n\t\t\tid={mapID}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{msg}\r\n\t\t</div>\r\n\t) : (\r\n\t\t<iframe\r\n\t\t\ttitle={sprintf(\r\n\t\t\t\t// translators: %s: location\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Embedded content from Google Maps. Location: %s.',\r\n\t\t\t\t\t'atrc-prefix-atrc'\r\n\t\t\t\t),\r\n\t\t\t\tloc\r\n\t\t\t)}\r\n\t\t\tsrc={`https://maps.google.com/maps?q=${encodeURIComponent(\r\n\t\t\t\tloc\r\n\t\t\t)}&t=&z=${zoom}&ie=UTF8&output=embed`}\r\n\t\t\tframeBorder='0'\r\n\t\t\tclassName={classNames(className, 'at-map')}\r\n\t\t\tid={mapID}\r\n\t\t\t{...defaultProps}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default AtrcGoogleMap;\r\n"],"mappings":"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"}