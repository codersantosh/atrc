{"version":3,"names":["withSelect","withDispatch","AtrcApplyWithSettings","WrappedComponent","select","ownProps","atrcStore","atrcStoreKey","settingsData","getSettings","isLoading","canSave","notices","settings","dispatch","saveSettings","data","updateSetting","key","val","setNotice","notice","removeNotice","id"],"sources":["D:/wamp/www/atrc-package/atrc/packages/data/hoc-settings.js"],"sourcesContent":["/*WordPress*/\r\nimport { withSelect, withDispatch } from '@wordpress/data';\r\n\r\n/*Local*/\r\nconst AtrcApplyWithSettings = (WrappedComponent) => {\r\n\treturn withSelect((select, ownProps) => {\r\n\t\tif (!ownProps || !ownProps.atrcStore || !ownProps.atrcStoreKey) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst { atrcStore = '', atrcStoreKey = '' } = ownProps;\r\n\r\n\t\tconst settingsData = select(atrcStore).getSettings(atrcStoreKey);\r\n\t\tlet isLoading = false;\r\n\t\tlet canSave = false;\r\n\t\tlet notices = [];\r\n\t\tlet settings = null;\r\n\t\tif (settingsData && settingsData.settings) {\r\n\t\t\t({ isLoading, canSave, notices, settings } = settingsData);\r\n\t\t}\r\n\t\treturn { isLoading, canSave, notices, settings };\r\n\t})(\r\n\t\twithDispatch((dispatch, ownProps) => {\r\n\t\t\tif (!ownProps || !ownProps.atrcStore || !ownProps.atrcStoreKey) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst { atrcStore = '', atrcStoreKey = '' } = ownProps;\r\n\t\t\treturn {\r\n\t\t\t\tsaveSettings: (data) =>\r\n\t\t\t\t\tdispatch(atrcStore).saveSettings(atrcStoreKey, data, true),\r\n\t\t\t\tupdateSetting: (key, val) =>\r\n\t\t\t\t\tdispatch(atrcStore).updateSetting(atrcStoreKey, key, val),\r\n\t\t\t\tsetNotice: (notice) =>\r\n\t\t\t\t\tdispatch(ownProps.atrcStore).setNotice(atrcStoreKey, notice),\r\n\t\t\t\tremoveNotice: (id) =>\r\n\t\t\t\t\tdispatch(ownProps.atrcStore).removeNotice(atrcStoreKey, id),\r\n\t\t\t};\r\n\t\t})(WrappedComponent)\r\n\t);\r\n};\r\n\r\nexport default AtrcApplyWithSettings;\r\n"],"mappings":"AAAA;AACA,SAASA,UAAU,EAAEC,YAAY,QAAQ,iBAAiB;;AAE1D;AACA,MAAMC,qBAAqB,GAAIC,gBAAgB,IAAK;EACnD,OAAOH,UAAU,CAAC,CAACI,MAAM,EAAEC,QAAQ,KAAK;IACvC,IAAI,CAACA,QAAQ,IAAI,CAACA,QAAQ,CAACC,SAAS,IAAI,CAACD,QAAQ,CAACE,YAAY,EAAE;MAC/D,OAAO,IAAI;IACZ;IAEA,MAAM;MAAED,SAAS,GAAG,EAAE;MAAEC,YAAY,GAAG;IAAG,CAAC,GAAGF,QAAQ;IAEtD,MAAMG,YAAY,GAAGJ,MAAM,CAACE,SAAS,CAAC,CAACG,WAAW,CAACF,YAAY,CAAC;IAChE,IAAIG,SAAS,GAAG,KAAK;IACrB,IAAIC,OAAO,GAAG,KAAK;IACnB,IAAIC,OAAO,GAAG,EAAE;IAChB,IAAIC,QAAQ,GAAG,IAAI;IACnB,IAAIL,YAAY,IAAIA,YAAY,CAACK,QAAQ,EAAE;MAC1C,CAAC;QAAEH,SAAS;QAAEC,OAAO;QAAEC,OAAO;QAAEC;MAAS,CAAC,GAAGL,YAAY;IAC1D;IACA,OAAO;MAAEE,SAAS;MAAEC,OAAO;MAAEC,OAAO;MAAEC;IAAS,CAAC;EACjD,CAAC,CAAC,CACDZ,YAAY,CAAC,CAACa,QAAQ,EAAET,QAAQ,KAAK;IACpC,IAAI,CAACA,QAAQ,IAAI,CAACA,QAAQ,CAACC,SAAS,IAAI,CAACD,QAAQ,CAACE,YAAY,EAAE;MAC/D,OAAO,IAAI;IACZ;IACA,MAAM;MAAED,SAAS,GAAG,EAAE;MAAEC,YAAY,GAAG;IAAG,CAAC,GAAGF,QAAQ;IACtD,OAAO;MACNU,YAAY,EAAGC,IAAI,IAClBF,QAAQ,CAACR,SAAS,CAAC,CAACS,YAAY,CAACR,YAAY,EAAES,IAAI,EAAE,IAAI,CAAC;MAC3DC,aAAa,EAAEA,CAACC,GAAG,EAAEC,GAAG,KACvBL,QAAQ,CAACR,SAAS,CAAC,CAACW,aAAa,CAACV,YAAY,EAAEW,GAAG,EAAEC,GAAG,CAAC;MAC1DC,SAAS,EAAGC,MAAM,IACjBP,QAAQ,CAACT,QAAQ,CAACC,SAAS,CAAC,CAACc,SAAS,CAACb,YAAY,EAAEc,MAAM,CAAC;MAC7DC,YAAY,EAAGC,EAAE,IAChBT,QAAQ,CAACT,QAAQ,CAACC,SAAS,CAAC,CAACgB,YAAY,CAACf,YAAY,EAAEgB,EAAE;IAC5D,CAAC;EACF,CAAC,CAAC,CAACpB,gBAAgB,CACpB,CAAC;AACF,CAAC;AAED,eAAeD,qBAAqB"}