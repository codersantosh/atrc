{"version":3,"names":["React","withSelect","withDispatch","AtrcApplyWithSettings","WrappedComponent","select","ownProps","atrcStore","atrcStoreKey","_ownProps$atrcStore","_ownProps$atrcStoreKe","settingsData","getSettings","isLoading","canSave","notices","settings","dispatch","_ownProps$atrcStore2","_ownProps$atrcStoreKe2","saveSettings","data","key","setNotice","updateSetting","val","dataKey","dataVal","notice","setNotices","removeNotice","id"],"sources":["D:/wamp/www/atrc-package/atrc/packages/data/hoc-settings.js"],"sourcesContent":["import React from 'react';\n\n/*WordPress*/\r\nimport { withSelect, withDispatch } from '@wordpress/data';\r\n\r\n/*Local*/\r\nconst AtrcApplyWithSettings = (WrappedComponent) => {\r\n\treturn withSelect((select, ownProps) => {\r\n\t\tif (!ownProps || !ownProps.atrcStore || !ownProps.atrcStoreKey) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst { atrcStore = '', atrcStoreKey = '' } = ownProps;\r\n\r\n\t\tconst settingsData = select(atrcStore).getSettings(atrcStoreKey);\r\n\t\tlet isLoading = false;\r\n\t\tlet canSave = false;\r\n\t\tlet notices = [];\r\n\t\tlet settings = null;\r\n\t\tif (settingsData && settingsData.settings) {\r\n\t\t\t({ isLoading, canSave, notices, settings } = settingsData);\r\n\t\t}\r\n\t\treturn { isLoading, canSave, notices, settings };\r\n\t})(\r\n\t\twithDispatch((dispatch, ownProps) => {\r\n\t\t\tif (!ownProps || !ownProps.atrcStore || !ownProps.atrcStoreKey) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst { atrcStore = '', atrcStoreKey = '' } = ownProps;\r\n\t\t\treturn {\r\n\t\t\t\tsaveSettings: (data) =>\r\n\t\t\t\t\tdispatch(atrcStore).saveSettings({\r\n\t\t\t\t\t\tkey: atrcStoreKey,\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\tsetNotice: true,\r\n\t\t\t\t\t}),\r\n\t\t\t\tupdateSetting: (key, val) =>\r\n\t\t\t\t\tdispatch(atrcStore).updateSetting({\r\n\t\t\t\t\t\tkey: atrcStoreKey,\r\n\t\t\t\t\t\tdataKey: key,\r\n\t\t\t\t\t\tdataVal: val,\r\n\t\t\t\t\t}),\r\n\t\t\t\tsetNotice: (notice) =>\r\n\t\t\t\t\tdispatch(ownProps.atrcStore).setNotice({ key: atrcStoreKey, notice }),\r\n\t\t\t\tsetNotices: (notices) =>\r\n\t\t\t\t\tdispatch(ownProps.atrcStore).setNotice({\r\n\t\t\t\t\t\tkey: atrcStoreKey,\r\n\t\t\t\t\t\tnotices,\r\n\t\t\t\t\t}),\r\n\t\t\t\tremoveNotice: (id) =>\r\n\t\t\t\t\tdispatch(ownProps.atrcStore).removeNotice({ key: atrcStoreKey, id }),\r\n\t\t\t};\r\n\t\t})(WrappedComponent)\r\n\t);\r\n};\r\n\r\nexport default AtrcApplyWithSettings;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,SAASC,UAAU,EAAEC,YAAY,QAAQ,iBAAiB;;AAE1D;AACA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIC,gBAAgB,EAAK;EACnD,OAAOH,UAAU,CAAC,UAACI,MAAM,EAAEC,QAAQ,EAAK;IACvC,IAAI,CAACA,QAAQ,IAAI,CAACA,QAAQ,CAACC,SAAS,IAAI,CAACD,QAAQ,CAACE,YAAY,EAAE;MAC/D,OAAO,IAAI;IACZ;IAEA,IAAAC,mBAAA,GAA8CH,QAAQ,CAA9CC,SAAS;MAATA,SAAS,GAAAE,mBAAA,cAAG,EAAE,GAAAA,mBAAA;MAAAC,qBAAA,GAAwBJ,QAAQ,CAA9BE,YAAY;MAAZA,YAAY,GAAAE,qBAAA,cAAG,EAAE,GAAAA,qBAAA;IAEzC,IAAMC,YAAY,GAAGN,MAAM,CAACE,SAAS,CAAC,CAACK,WAAW,CAACJ,YAAY,CAAC;IAChE,IAAIK,SAAS,GAAG,KAAK;IACrB,IAAIC,OAAO,GAAG,KAAK;IACnB,IAAIC,OAAO,GAAG,EAAE;IAChB,IAAIC,QAAQ,GAAG,IAAI;IACnB,IAAIL,YAAY,IAAIA,YAAY,CAACK,QAAQ,EAAE;MACvCH,SAAS,GAAiCF,YAAY,CAAtDE,SAAS;MAAEC,OAAO,GAAwBH,YAAY,CAA3CG,OAAO;MAAEC,OAAO,GAAeJ,YAAY,CAAlCI,OAAO;MAAEC,QAAQ,GAAKL,YAAY,CAAzBK,QAAQ;IACzC;IACA,OAAO;MAAEH,SAAS,EAATA,SAAS;MAAEC,OAAO,EAAPA,OAAO;MAAEC,OAAO,EAAPA,OAAO;MAAEC,QAAQ,EAARA;IAAS,CAAC;EACjD,CAAC,CAAC,CACDd,YAAY,CAAC,UAACe,QAAQ,EAAEX,QAAQ,EAAK;IACpC,IAAI,CAACA,QAAQ,IAAI,CAACA,QAAQ,CAACC,SAAS,IAAI,CAACD,QAAQ,CAACE,YAAY,EAAE;MAC/D,OAAO,IAAI;IACZ;IACA,IAAAU,oBAAA,GAA8CZ,QAAQ,CAA9CC,SAAS;MAATA,SAAS,GAAAW,oBAAA,cAAG,EAAE,GAAAA,oBAAA;MAAAC,sBAAA,GAAwBb,QAAQ,CAA9BE,YAAY;MAAZA,YAAY,GAAAW,sBAAA,cAAG,EAAE,GAAAA,sBAAA;IACzC,OAAO;MACNC,YAAY,EAAE,SAAAA,aAACC,IAAI;QAAA,OAClBJ,QAAQ,CAACV,SAAS,CAAC,CAACa,YAAY,CAAC;UAChCE,GAAG,EAAEd,YAAY;UACjBa,IAAI,EAAJA,IAAI;UACJE,SAAS,EAAE;QACZ,CAAC,CAAC;MAAA;MACHC,aAAa,EAAE,SAAAA,cAACF,GAAG,EAAEG,GAAG;QAAA,OACvBR,QAAQ,CAACV,SAAS,CAAC,CAACiB,aAAa,CAAC;UACjCF,GAAG,EAAEd,YAAY;UACjBkB,OAAO,EAAEJ,GAAG;UACZK,OAAO,EAAEF;QACV,CAAC,CAAC;MAAA;MACHF,SAAS,EAAE,SAAAA,UAACK,MAAM;QAAA,OACjBX,QAAQ,CAACX,QAAQ,CAACC,SAAS,CAAC,CAACgB,SAAS,CAAC;UAAED,GAAG,EAAEd,YAAY;UAAEoB,MAAM,EAANA;QAAO,CAAC,CAAC;MAAA;MACtEC,UAAU,EAAE,SAAAA,WAACd,OAAO;QAAA,OACnBE,QAAQ,CAACX,QAAQ,CAACC,SAAS,CAAC,CAACgB,SAAS,CAAC;UACtCD,GAAG,EAAEd,YAAY;UACjBO,OAAO,EAAPA;QACD,CAAC,CAAC;MAAA;MACHe,YAAY,EAAE,SAAAA,aAACC,EAAE;QAAA,OAChBd,QAAQ,CAACX,QAAQ,CAACC,SAAS,CAAC,CAACuB,YAAY,CAAC;UAAER,GAAG,EAAEd,YAAY;UAAEuB,EAAE,EAAFA;QAAG,CAAC,CAAC;MAAA;IACtE,CAAC;EACF,CAAC,CAAC,CAAC3B,gBAAgB,CACpB,CAAC;AACF,CAAC;AAED,eAAeD,qBAAqB","ignoreList":[]}