{"version":3,"names":["React","createReduxStore","register","actions","reducer","controls","selectors","resolvers","ClassAtrcStore","_classCallCheck","instance","DEFAULT_STATE","CACHE_STATE","TYPES","_createClass","key","value","store","addDefaults","type","queryArgs","allowedParams","queryParams","arguments","length","undefined","isLoading","canSave","original","settings","notices","extraData","selectedItems","item","confirmDelete","ids","open","currentCache","items","countAllItems","countQueryItems","totalPages","getDefaults","setDefaults","defaults","AtrcStore","AtrcRegisterStore","name"],"sources":["D:/wamp/www/atrc-package/atrc/packages/data/store.js"],"sourcesContent":["import React from 'react';\r\n\r\n/*WordPress*/\r\nimport { createReduxStore, register } from '@wordpress/data';\r\n\r\n/* Internal */\r\nimport { actions } from './redux-utils/actions';\r\nimport { reducer } from './redux-utils/reducer';\r\nimport { controls } from './redux-utils/controls';\r\nimport { selectors } from './redux-utils/selectors';\r\nimport { resolvers } from './redux-utils/resolvers';\r\n\r\n/* Local */\r\nclass ClassAtrcStore {\r\n    constructor() {\r\n        if (!ClassAtrcStore.instance) {\r\n            ClassAtrcStore.instance = this;\r\n            this.DEFAULT_STATE = {};\r\n            this.CACHE_STATE = {};\r\n            this.TYPES = {};\r\n        }\r\n        return ClassAtrcStore.instance;\r\n    }\r\n\r\n    register(store) {\r\n        this.addDefaults(\r\n            store.key,\r\n            store.type,\r\n            store.queryArgs,\r\n            store.allowedParams,\r\n            store.queryParams\r\n        );\r\n    }\r\n\r\n    /* @param {string}        key          key data type eg: item, page, custom type, custom table etc */\r\n    addDefaults(key, type = '', queryArgs, allowedParams, queryParams) {\r\n        this.TYPES[key] = type;\r\n\r\n        if ('settings' === type || 'localStorage' === type) {\r\n            // Register all methods for the key and path\r\n            this.DEFAULT_STATE[key] = {\r\n                isLoading: true,\r\n                canSave: false,\r\n                original: {} /* store original settings */,\r\n                settings: {} /* store state like settings */,\r\n                notices: [],\r\n                extraData: null,\r\n                type,\r\n            };\r\n        } else {\r\n            // Register all methods for the key and path\r\n            this.DEFAULT_STATE[key] = {\r\n                isLoading: true,\r\n                canSave: false,\r\n                allowedParams: [\r\n                    'page',\r\n                    'per_page',\r\n                    'order',\r\n                    'orderby',\r\n                    'search',\r\n                    'author',\r\n                    'author_exclude',\r\n                ] /* allowed on query params */,\r\n                selectedItems: [], // selected item data\r\n                item: {}, // like a state to  update data\r\n                original: {}, // a selected item data\r\n                confirmDelete: {\r\n                    ids: [],\r\n                    open: false,\r\n                },\r\n                notices: [],\r\n                extraData: null, // store extra data object\r\n                currentCache: null, // store extra data object,\r\n            };\r\n            this.CACHE_STATE[key] = {\r\n                queryArgs: {},\r\n                // {\r\n                // \tcontext: 'edit',\r\n                // \tpage: 1,\r\n                // \tper_page: 10,\r\n                // \torder: 'desc',\r\n                // \torderby: 'created',\r\n                // \tsearch: null,\r\n                // \tauthor: null,\r\n                // \tauthor_exclude: null,\r\n                // \t/* add others from queryArgs when registered*/\r\n                // }\r\n                items: [], //lists of items\r\n                countAllItems: null,\r\n                countQueryItems: null,\r\n                totalPages: null,\r\n                notices: [],\r\n                extraData: null, // store extra data object\r\n            };\r\n        }\r\n        if (queryArgs) {\r\n            this.CACHE_STATE[key].queryArgs = queryArgs;\r\n        }\r\n        if (allowedParams) {\r\n            this.DEFAULT_STATE[key].allowedParams = allowedParams;\r\n        }\r\n        /* param type if url, param is present in url eg page/2, category/tech */\r\n        if (queryParams) {\r\n            this.DEFAULT_STATE[key].queryParams = queryParams;\r\n        }\r\n    }\r\n\r\n    getDefaults(key = '') {\r\n        if (key) {\r\n            return this.DEFAULT_STATE[key] || null;\r\n        }\r\n        return this.DEFAULT_STATE;\r\n    }\r\n\r\n    setDefaults(key, defaults) {\r\n        this.DEFAULT_STATE[key] = defaults;\r\n    }\r\n}\r\n\r\nexport const AtrcStore = new ClassAtrcStore();\r\n\r\nexport default function AtrcRegisterStore(name) {\r\n    const store = createReduxStore(name, {\r\n        reducer,\r\n        actions,\r\n        controls,\r\n        selectors,\r\n        resolvers,\r\n    });\r\n    register(store);\r\n    return store;\r\n}"],"mappings":"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","ignoreList":[]}