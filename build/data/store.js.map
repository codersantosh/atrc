{"version":3,"names":["createReduxStore","register","actions","reducer","controls","selectors","resolvers","ClassAtrcStore","_classCallCheck","instance","DEFAULT_STATE","CACHE_STATE","TYPES","_createClass","key","value","store","addDefaults","type","queryArgs","allowedParams","queryParams","arguments","length","undefined","isLoading","canSave","original","settings","notices","extraData","selectedItems","item","confirmDelete","ids","open","currentCache","items","countAllItems","countQueryItems","totalPages","getDefaults","setDefaults","defaults","AtrcStore","AtrcRegisterStore","name"],"sources":["D:/wamp/www/atrc-package/atrc/packages/data/store.js"],"sourcesContent":["/*WordPress*/\r\nimport { createReduxStore, register } from '@wordpress/data';\r\n\r\n/* Internal */\r\nimport { actions } from './redux-utils/actions';\r\nimport { reducer } from './redux-utils/reducer';\r\nimport { controls } from './redux-utils/controls';\r\nimport { selectors } from './redux-utils/selectors';\r\nimport { resolvers } from './redux-utils/resolvers';\r\n\r\n/* Local */\r\nclass ClassAtrcStore {\r\n\tconstructor() {\r\n\t\tif (!ClassAtrcStore.instance) {\r\n\t\t\tClassAtrcStore.instance = this;\r\n\t\t\tthis.DEFAULT_STATE = {};\r\n\t\t\tthis.CACHE_STATE = {};\r\n\t\t\tthis.TYPES = {};\r\n\t\t}\r\n\t\treturn ClassAtrcStore.instance;\r\n\t}\r\n\r\n\tregister(store) {\r\n\t\tthis.addDefaults(\r\n\t\t\tstore.key,\r\n\t\t\tstore.type,\r\n\t\t\tstore.queryArgs,\r\n\t\t\tstore.allowedParams,\r\n\t\t\tstore.queryParams\r\n\t\t);\r\n\t}\r\n\r\n\t/* @param {string}        key          key data type eg: item, page, custom type, custom table etc */\r\n\taddDefaults(key, type = '', queryArgs, allowedParams, queryParams) {\r\n\t\tthis.TYPES[key] = type;\r\n\r\n\t\tif ('settings' === type || 'localStorage' === type) {\r\n\t\t\t// Register all methods for the key and path\r\n\t\t\tthis.DEFAULT_STATE[key] = {\r\n\t\t\t\tisLoading: true,\r\n\t\t\t\tcanSave: false,\r\n\t\t\t\toriginal: {} /* store original settings */,\r\n\t\t\t\tsettings: {} /* store state like settings */,\r\n\t\t\t\tnotices: [],\r\n\t\t\t\textraData: null,\r\n\t\t\t\ttype,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\t// Register all methods for the key and path\r\n\t\t\tthis.DEFAULT_STATE[key] = {\r\n\t\t\t\tisLoading: true,\r\n\t\t\t\tcanSave: false,\r\n\t\t\t\tallowedParams: [\r\n\t\t\t\t\t'page',\r\n\t\t\t\t\t'per_page',\r\n\t\t\t\t\t'order',\r\n\t\t\t\t\t'orderby',\r\n\t\t\t\t\t'search',\r\n\t\t\t\t\t'author',\r\n\t\t\t\t\t'author_exclude',\r\n\t\t\t\t] /* allowed on query params */,\r\n\t\t\t\tselectedItems: [], // selected item data\r\n\t\t\t\titem: {}, // like a state to  update data\r\n\t\t\t\toriginal: {}, // a selected item data\r\n\t\t\t\tconfirmDelete: {\r\n\t\t\t\t\tids: [],\r\n\t\t\t\t\topen: false,\r\n\t\t\t\t},\r\n\t\t\t\tnotices: [],\r\n\t\t\t\textraData: null, // store extra data object\r\n\t\t\t\tcurrentCache: null, // store extra data object,\r\n\t\t\t};\r\n\t\t\tthis.CACHE_STATE[key] = {\r\n\t\t\t\tqueryArgs: {},\r\n\t\t\t\t// {\r\n\t\t\t\t// \tcontext: 'edit',\r\n\t\t\t\t// \tpage: 1,\r\n\t\t\t\t// \tper_page: 10,\r\n\t\t\t\t// \torder: 'desc',\r\n\t\t\t\t// \torderby: 'created',\r\n\t\t\t\t// \tsearch: null,\r\n\t\t\t\t// \tauthor: null,\r\n\t\t\t\t// \tauthor_exclude: null,\r\n\t\t\t\t// \t/* add others from queryArgs when registered*/\r\n\t\t\t\t// }\r\n\t\t\t\titems: [], //lists of items\r\n\t\t\t\tcountAllItems: null,\r\n\t\t\t\tcountQueryItems: null,\r\n\t\t\t\ttotalPages: null,\r\n\t\t\t\tnotices: [],\r\n\t\t\t\textraData: null, // store extra data object\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (queryArgs) {\r\n\t\t\tthis.CACHE_STATE[key].queryArgs = queryArgs;\r\n\t\t}\r\n\t\tif (allowedParams) {\r\n\t\t\tthis.DEFAULT_STATE[key].allowedParams = allowedParams;\r\n\t\t}\r\n\t\t/* param type if url, param is present in url eg page/2, category/tech */\r\n\t\tif (queryParams) {\r\n\t\t\tthis.DEFAULT_STATE[key].queryParams = queryParams;\r\n\t\t}\r\n\t}\r\n\r\n\tgetDefaults(key = '') {\r\n\t\tif (key) {\r\n\t\t\treturn this.DEFAULT_STATE[key] || null;\r\n\t\t}\r\n\t\treturn this.DEFAULT_STATE;\r\n\t}\r\n\r\n\tsetDefaults(key, defaults) {\r\n\t\tthis.DEFAULT_STATE[key] = defaults;\r\n\t}\r\n}\r\n\r\nexport const AtrcStore = new ClassAtrcStore();\r\n\r\nexport default function AtrcRegisterStore(name) {\r\n\tconst store = createReduxStore(name, {\r\n\t\treducer,\r\n\t\tactions,\r\n\t\tcontrols,\r\n\t\tselectors,\r\n\t\tresolvers,\r\n\t});\r\n\tregister(store);\r\n\treturn store;\r\n}\r\n"],"mappings":"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"}