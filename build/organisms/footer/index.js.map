{"version":3,"names":["useEffect","useState","classnames","AtrcWrap","AtrcPrefix","AtrcGetInlineCss","getStickyClass","type","AtrcFooterTag","props","_props$useDynamicPosi","useDynamicPosition","_props$isSticky","isSticky","_props$includeDefault","includeDefaultClass","_props$stickyProps","stickyProps","_props$className","className","_props$variant","variant","_props$children","children","defaultProps","_objectWithoutProperties","_excluded","React","createElement","_extends","tag","AtrcFooterClient","_props$className2","_props$stickyProps2","css","_props$scrollDiff","scrollDiff","_useState","_useState2","_slicedToArray","addStickyClass","setAddStickyClass","_useState3","window","pageYOffset","_useState4","scrollPos","setScrollPos","_useState5","_useState6","scrollDirection","setScrollDirection","_useState7","_useState8","lastDirectionScrollPos","setLastDirectionScrollPos","handleScroll","currentScrollPos","addEventListener","removeEventListener","diff","Math","abs","style","AtrcFooter","_props$useDynamicPosi2"],"sources":["D:/wamp/www/atrc-package/atrc/packages/organisms/footer/index.js"],"sourcesContent":["/*WordPress*/\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\n/* Atoms */\r\nimport AtrcWrap from '../../atoms/wrap';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/* Utils */\r\nimport AtrcGetInlineCss from '../../utils/get-inline-css';\r\n\r\n/*Local*/\r\nconst getStickyClass = (type) => {\r\n\tif ('fixed' === type) {\r\n\t\treturn AtrcPrefix('ftr-fix');\r\n\t}\r\n\treturn AtrcPrefix('ftr-stky');\r\n};\r\n\r\nexport const AtrcFooterTag = (props) => {\r\n\tconst {\r\n\t\tuseDynamicPosition = false,\r\n\t\tisSticky = false,\r\n\t\tincludeDefaultClass = true,\r\n\t\tstickyProps = {},\r\n\t\tclassName = '',\r\n\t\tvariant = '',\r\n\t\tchildren = '',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\ttag='footer'\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ftr'),\r\n\t\t\t\tincludeDefaultClass && 'at-bg-cl',\r\n\t\t\t\tincludeDefaultClass && 'at-p',\r\n\t\t\t\tclassName,\r\n\t\t\t\t!useDynamicPosition && isSticky\r\n\t\t\t\t\t? getStickyClass(stickyProps.type) + ' at-pos at-z-idx'\r\n\t\t\t\t\t: '',\r\n\t\t\t\tvariant && AtrcPrefix('ftr') + variant\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{children}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\n/* Gutenberg block render doesnot support HOOKS */\r\nconst AtrcFooterClient = (props) => {\r\n\tconst {\r\n\t\tclassName = '',\r\n\t\tstickyProps = {\r\n\t\t\ttype: 'stky',\r\n\t\t\tcss: {\r\n\t\t\t\t'--at-b': '0',\r\n\t\t\t},\r\n\t\t},\r\n\t\tscrollDiff = 130,\r\n\t} = props;\r\n\r\n\tconst [addStickyClass, setAddStickyClass] = useState(false);\r\n\r\n\tconst [scrollPos, setScrollPos] = useState(window.pageYOffset);\r\n\tconst [scrollDirection, setScrollDirection] = useState();\r\n\tconst [lastDirectionScrollPos, setLastDirectionScrollPos] = useState(0);\r\n\r\n\tconst handleScroll = () => {\r\n\t\tconst currentScrollPos = window.pageYOffset;\r\n\t\tsetScrollDirection(currentScrollPos > scrollPos ? 'down' : 'up');\r\n\t\tsetScrollPos(currentScrollPos);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('scroll', handleScroll);\r\n\t\t};\r\n\t}, [scrollPos]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (scrollDirection) {\r\n\t\t\tsetLastDirectionScrollPos(window.pageYOffset);\r\n\t\t}\r\n\t}, [scrollDirection]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst diff = Math.abs(scrollPos - lastDirectionScrollPos);\r\n\t\tif (diff > scrollDiff) {\r\n\t\t\tif (\r\n\t\t\t\tscrollDirection === 'up' &&\r\n\t\t\t\twindow.pageYOffset < lastDirectionScrollPos\r\n\t\t\t) {\r\n\t\t\t\tsetAddStickyClass(false);\r\n\t\t\t} else if (\r\n\t\t\t\tscrollDirection === 'down' &&\r\n\t\t\t\twindow.pageYOffset > lastDirectionScrollPos\r\n\t\t\t) {\r\n\t\t\t\tsetAddStickyClass(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [scrollPos, lastDirectionScrollPos, scrollDirection]);\r\n\r\n\treturn (\r\n\t\t<AtrcFooterTag\r\n\t\t\t{...props}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tclassName,\r\n\t\t\t\taddStickyClass\r\n\t\t\t\t\t? getStickyClass(stickyProps.type) + ' at-pos at-z-idx'\r\n\t\t\t\t\t: ' '\r\n\t\t\t)}\r\n\t\t\tstyle={addStickyClass ? AtrcGetInlineCss(stickyProps.css) : null}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst AtrcFooter = (props) => {\r\n\tconst { useDynamicPosition = false } = props;\r\n\r\n\tif (useDynamicPosition) {\r\n\t\treturn <AtrcFooterClient {...props} />;\r\n\t}\r\n\r\n\treturn <AtrcFooterTag {...props} />;\r\n};\r\nexport default AtrcFooter;\r\n"],"mappings":"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"}