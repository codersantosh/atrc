{"version":3,"names":["React","useEffect","useState","classnames","AtrcWrap","AtrcPrefix","AtrcHeaderTag","props","_props$isSticky","isSticky","_props$className","className","_props$variant","variant","_props$children","children","defaultProps","_objectWithoutProperties","_excluded","createElement","_extends","tag","AtrcHeaderClient","_props$isSticky2","_props$useDynamicHeig","useDynamicHeight","_useState","_useState2","_slicedToArray","headerHeight","setHeaderHeight","updateHeight","stickyHeader","document","getElementsByClassName","offsetHeight","timeoutId","handleHeight","setTimeout","handleResize","clearTimeout","window","addEventListener","removeEventListener","atMain","getElementById","style","marginTop","concat","AtrcHeader","_props$useDynamicHeig2"],"sources":["D:/wamp/www/atrc-package/atrc/packages/organisms/header/index.js"],"sourcesContent":["import React from 'react';\n\n/*WordPress*/\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\n/*Atoms*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\n\r\n/* Prefix */\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local*/\r\nexport const AtrcHeaderTag = (props) => {\r\n\tconst {\r\n\t\tisSticky = false,\r\n\t\tclassName = '',\r\n\t\tvariant = '',\r\n\t\tchildren = '',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\ttag='header'\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('hdr'),\r\n\t\t\t\t'at-bg-cl',\r\n\t\t\t\tclassName,\r\n\t\t\t\tisSticky ? AtrcPrefix('hdr-stky') + ' at-pos at-z-idx' : '',\r\n\t\t\t\tvariant && AtrcPrefix('hdr') + variant\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{children}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\n/* Gutenberg block render doesnot support HOOKS */\r\nconst AtrcHeaderClient = (props) => {\r\n\tconst { isSticky = false, useDynamicHeight = true } = props;\r\n\r\n\tconst [headerHeight, setHeaderHeight] = useState(0);\r\n\r\n\tconst updateHeight = () => {\r\n\t\tconst stickyHeader = document.getElementsByClassName('at-hdr-stky');\r\n\t\tif (stickyHeader && stickyHeader[0]) {\r\n\t\t\tsetHeaderHeight(stickyHeader[0].offsetHeight + 16);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tlet timeoutId;\r\n\t\tconst handleHeight = () => {\r\n\t\t\tif (isSticky && useDynamicHeight) {\r\n\t\t\t\ttimeoutId = setTimeout(updateHeight, 300);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst handleResize = () => {\r\n\t\t\tclearTimeout(timeoutId);\r\n\t\t};\r\n\t\twindow.addEventListener('resize', handleHeight);\r\n\r\n\t\thandleHeight();\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', handleHeight);\r\n\t\t\tclearTimeout(timeoutId);\r\n\t\t};\r\n\t}, [isSticky, useDynamicHeight]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (headerHeight && isSticky && useDynamicHeight) {\r\n\t\t\tconst atMain = document.getElementById('at-main');\r\n\t\t\tif (atMain) {\r\n\t\t\t\tatMain.style.marginTop = `${headerHeight}px`;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isSticky, headerHeight, useDynamicHeight]);\r\n\r\n\treturn <AtrcHeaderTag {...props} />;\r\n};\r\n\r\nconst AtrcHeader = (props) => {\r\n\tconst { useDynamicHeight = false } = props;\r\n\r\n\tif (useDynamicHeight) {\r\n\t\treturn <AtrcHeaderClient {...props} />;\r\n\t}\r\n\r\n\treturn <AtrcHeaderTag {...props} />;\r\n};\r\nexport default AtrcHeader;\r\n"],"mappings":"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","ignoreList":[]}