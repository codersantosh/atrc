{"version":3,"names":["React","useMemo","__","store","coreStore","useSelect","classnames","AtrcControlSelect","AtrcNotice","AtrcPrefix","AtrcUseIsPostTypeHierarchical","postType","select","type","getPostType","viewable","hierarchical","excludedPostTypes","AtrcControlGetPostTypeOptions","props","arguments","length","undefined","_props$tax","tax","_props$showOptionNone","showOptionNone","_props$optionNoneValu","optionNoneValue","_props$optionNoneLabe","optionNoneLabel","postTypes","_getPostTypes","_select","getPostTypes","filteredPostTypes","per_page","filter","_ref","slug","includes","options","baseOptions","forEach","_ref2","labels","taxonomies","push","label","singular_name","value","concat","AtrcControlSelectPostType","onChange","_props$showOptionNone2","_props$optionNoneValu2","_props$optionNoneLabe2","_props$variant","variant","_props$className","className","defaultProps","_objectWithoutProperties","_excluded","createElement","autoDismiss","isDismissible","_extends"],"sources":["D:/wamp/www/atrc-package/atrc/packages/controls/control-select-post-type/index.js"],"sourcesContent":["import React from 'react';\r\n\r\n/* WordPress*/\r\nimport { useMemo } from '@wordpress/element';\r\n\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\n/*Controls*/\r\nimport AtrcControlSelect from '../control-select';\r\n\r\n/* Molecules */\r\nimport AtrcNotice from '../../molecules/notice';\r\n\r\n/* Prefix */\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/* Local*/\r\n/**\r\n * Hook that returns whether a specific post type is hierarchical.\r\n *\r\n * @param {string} postType The post type to check.\r\n * @return {boolean} Whether a specific post type is hierarchical.\r\n */\r\nexport function AtrcUseIsPostTypeHierarchical(postType) {\r\n    return useSelect(\r\n        (select) => {\r\n            const type = select(coreStore).getPostType(postType);\r\n            return type?.viewable && type?.hierarchical;\r\n        },\r\n        [postType]\r\n    );\r\n}\r\nconst excludedPostTypes = [\r\n    'attachment',\r\n    'gutentor-fonts',\r\n    'wp_template',\r\n    'gutentor-icons',\r\n];\r\n\r\nexport function AtrcControlGetPostTypeOptions(props = {}) {\r\n    const { tax = '', showOptionNone = false, optionNoneValue = '', optionNoneLabel = '' } = props;\r\n\r\n    const postTypes = useSelect((select) => {\r\n        const { getPostTypes } = select(coreStore);\r\n\r\n        const filteredPostTypes = getPostTypes({ per_page: -1 })?.filter(\r\n            ({ viewable, slug }) => viewable && !excludedPostTypes.includes(slug)\r\n        );\r\n        return filteredPostTypes;\r\n    }, []);\r\n\r\n    const options = useMemo(() => {\r\n        const baseOptions = [];\r\n\r\n        (postTypes || []).forEach(({ labels, slug, taxonomies }) => {\r\n            if (!tax) {\r\n                baseOptions.push({\r\n                    label: labels.singular_name,\r\n                    value: slug,\r\n                });\r\n            } else if (taxonomies.includes(tax)) {\r\n                baseOptions.push({\r\n                    label: labels.singular_name,\r\n                    value: slug,\r\n                });\r\n            }\r\n        });\r\n\r\n        if (showOptionNone) {\r\n            return [\r\n                {\r\n                    value: optionNoneValue,\r\n                    label: optionNoneLabel,\r\n                },\r\n                ...baseOptions,\r\n            ];\r\n        }\r\n\r\n        return baseOptions;\r\n    }, [tax, postTypes, showOptionNone]);\r\n\r\n    return options;\r\n}\r\n\r\n/*AtrcControlSelectPostType*/\r\nfunction AtrcControlSelectPostType(props) {\r\n    const {\r\n        label,\r\n        value,\r\n        onChange,\r\n        showOptionNone = true,\r\n        optionNoneValue = '',\r\n        optionNoneLabel = __('Select', 'atrc-prefix-atrc'),\r\n        variant = '',\r\n        className = '',\r\n        ...defaultProps\r\n    } = props;\r\n\r\n    const options = AtrcControlGetPostTypeOptions({\r\n        showOptionNone,\r\n        optionNoneValue,\r\n        optionNoneLabel,\r\n    });\r\n\r\n    if (!options || !options.length) {\r\n        return (\r\n            <AtrcNotice\r\n                autoDismiss={false}\r\n                isDismissible={false}>\r\n                {__('No types found!', 'atrc-prefix-atrc')}\r\n            </AtrcNotice>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <AtrcControlSelect\r\n            label={label}\r\n            className={classnames(\r\n                AtrcPrefix('ctrl-select-post-type'),\r\n                className,\r\n                variant ? AtrcPrefix('ctrl-select-post-type') + '-' + variant : ''\r\n            )}\r\n            value={value}\r\n            onChange={onChange}\r\n            options={options}\r\n            {...defaultProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default AtrcControlSelectPostType;\r\n"],"mappings":";;;;AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,SAASC,OAAO,QAAQ,oBAAoB;AAE5C,SAASC,EAAE,QAAQ,iBAAiB;AAEpC,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AAEzD,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA,OAAOC,UAAU,MAAM,YAAY;;AAEnC;AACA,OAAOC,iBAAiB,MAAM,mBAAmB;;AAEjD;AACA,OAAOC,UAAU,MAAM,wBAAwB;;AAE/C;AACA,OAAOC,UAAU,MAAM,mBAAmB;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,6BAA6BA,CAACC,QAAQ,EAAE;EACpD,OAAON,SAAS,CACZ,UAACO,MAAM,EAAK;IACR,IAAMC,IAAI,GAAGD,MAAM,CAACR,SAAS,CAAC,CAACU,WAAW,CAACH,QAAQ,CAAC;IACpD,OAAO,CAAAE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,QAAQ,MAAIF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,YAAY;EAC/C,CAAC,EACD,CAACL,QAAQ,CACb,CAAC;AACL;AACA,IAAMM,iBAAiB,GAAG,CACtB,YAAY,EACZ,gBAAgB,EAChB,aAAa,EACb,gBAAgB,CACnB;AAED,OAAO,SAASC,6BAA6BA,CAAA,EAAa;EAAA,IAAZC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpD,IAAAG,UAAA,GAAyFJ,KAAK,CAAtFK,GAAG;IAAHA,GAAG,GAAAD,UAAA,cAAG,EAAE,GAAAA,UAAA;IAAAE,qBAAA,GAAyEN,KAAK,CAA5EO,cAAc;IAAdA,cAAc,GAAAD,qBAAA,cAAG,KAAK,GAAAA,qBAAA;IAAAE,qBAAA,GAAiDR,KAAK,CAApDS,eAAe;IAAfA,eAAe,GAAAD,qBAAA,cAAG,EAAE,GAAAA,qBAAA;IAAAE,qBAAA,GAA2BV,KAAK,CAA9BW,eAAe;IAAfA,eAAe,GAAAD,qBAAA,cAAG,EAAE,GAAAA,qBAAA;EAEpF,IAAME,SAAS,GAAG1B,SAAS,CAAC,UAACO,MAAM,EAAK;IAAA,IAAAoB,aAAA;IACpC,IAAAC,OAAA,GAAyBrB,MAAM,CAACR,SAAS,CAAC;MAAlC8B,YAAY,GAAAD,OAAA,CAAZC,YAAY;IAEpB,IAAMC,iBAAiB,IAAAH,aAAA,GAAGE,YAAY,CAAC;MAAEE,QAAQ,EAAE,CAAC;IAAE,CAAC,CAAC,cAAAJ,aAAA,uBAA9BA,aAAA,CAAgCK,MAAM,CAC5D,UAAAC,IAAA;MAAA,IAAGvB,QAAQ,GAAAuB,IAAA,CAARvB,QAAQ;QAAEwB,IAAI,GAAAD,IAAA,CAAJC,IAAI;MAAA,OAAOxB,QAAQ,IAAI,CAACE,iBAAiB,CAACuB,QAAQ,CAACD,IAAI,CAAC;IAAA,CACzE,CAAC;IACD,OAAOJ,iBAAiB;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMM,OAAO,GAAGxC,OAAO,CAAC,YAAM;IAC1B,IAAMyC,WAAW,GAAG,EAAE;IAEtB,CAACX,SAAS,IAAI,EAAE,EAAEY,OAAO,CAAC,UAAAC,KAAA,EAAkC;MAAA,IAA/BC,MAAM,GAAAD,KAAA,CAANC,MAAM;QAAEN,IAAI,GAAAK,KAAA,CAAJL,IAAI;QAAEO,UAAU,GAAAF,KAAA,CAAVE,UAAU;MACjD,IAAI,CAACtB,GAAG,EAAE;QACNkB,WAAW,CAACK,IAAI,CAAC;UACbC,KAAK,EAAEH,MAAM,CAACI,aAAa;UAC3BC,KAAK,EAAEX;QACX,CAAC,CAAC;MACN,CAAC,MAAM,IAAIO,UAAU,CAACN,QAAQ,CAAChB,GAAG,CAAC,EAAE;QACjCkB,WAAW,CAACK,IAAI,CAAC;UACbC,KAAK,EAAEH,MAAM,CAACI,aAAa;UAC3BC,KAAK,EAAEX;QACX,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;IAEF,IAAIb,cAAc,EAAE;MAChB,QACI;QACIwB,KAAK,EAAEtB,eAAe;QACtBoB,KAAK,EAAElB;MACX,CAAC,EAAAqB,MAAA,CACET,WAAW;IAEtB;IAEA,OAAOA,WAAW;EACtB,CAAC,EAAE,CAAClB,GAAG,EAAEO,SAAS,EAAEL,cAAc,CAAC,CAAC;EAEpC,OAAOe,OAAO;AAClB;;AAEA;AACA,SAASW,yBAAyBA,CAACjC,KAAK,EAAE;EACtC,IACI6B,KAAK,GASL7B,KAAK,CATL6B,KAAK;IACLE,KAAK,GAQL/B,KAAK,CARL+B,KAAK;IACLG,QAAQ,GAORlC,KAAK,CAPLkC,QAAQ;IAAAC,sBAAA,GAORnC,KAAK,CANLO,cAAc;IAAdA,cAAc,GAAA4B,sBAAA,cAAG,IAAI,GAAAA,sBAAA;IAAAC,sBAAA,GAMrBpC,KAAK,CALLS,eAAe;IAAfA,eAAe,GAAA2B,sBAAA,cAAG,EAAE,GAAAA,sBAAA;IAAAC,sBAAA,GAKpBrC,KAAK,CAJLW,eAAe;IAAfA,eAAe,GAAA0B,sBAAA,cAAGtD,EAAE,CAAC,QAAQ,EAAE,kBAAkB,CAAC,GAAAsD,sBAAA;IAAAC,cAAA,GAIlDtC,KAAK,CAHLuC,OAAO;IAAPA,OAAO,GAAAD,cAAA,cAAG,EAAE,GAAAA,cAAA;IAAAE,gBAAA,GAGZxC,KAAK,CAFLyC,SAAS;IAATA,SAAS,GAAAD,gBAAA,cAAG,EAAE,GAAAA,gBAAA;IACXE,YAAY,GAAAC,wBAAA,CACf3C,KAAK,EAAA4C,SAAA;EAET,IAAMtB,OAAO,GAAGvB,6BAA6B,CAAC;IAC1CQ,cAAc,EAAdA,cAAc;IACdE,eAAe,EAAfA,eAAe;IACfE,eAAe,EAAfA;EACJ,CAAC,CAAC;EAEF,IAAI,CAACW,OAAO,IAAI,CAACA,OAAO,CAACpB,MAAM,EAAE;IAC7B,oBACIrB,KAAA,CAAAgE,aAAA,CAACxD,UAAU;MACPyD,WAAW,EAAE,KAAM;MACnBC,aAAa,EAAE;IAAM,GACpBhE,EAAE,CAAC,iBAAiB,EAAE,kBAAkB,CACjC,CAAC;EAErB;EAEA,oBACIF,KAAA,CAAAgE,aAAA,CAACzD,iBAAiB,EAAA4D,QAAA;IACdnB,KAAK,EAAEA,KAAM;IACbY,SAAS,EAAEtD,UAAU,CACjBG,UAAU,CAAC,uBAAuB,CAAC,EACnCmD,SAAS,EACTF,OAAO,GAAGjD,UAAU,CAAC,uBAAuB,CAAC,GAAG,GAAG,GAAGiD,OAAO,GAAG,EACpE,CAAE;IACFR,KAAK,EAAEA,KAAM;IACbG,QAAQ,EAAEA,QAAS;IACnBZ,OAAO,EAAEA;EAAQ,GACboB,YAAY,CACnB,CAAC;AAEV;AAEA,eAAeT,yBAAyB","ignoreList":[]}