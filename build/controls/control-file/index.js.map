{"version":3,"names":["React","__","useMemo","useState","useSelect","store","coreStore","classnames","BsPlus","BsTrash","cloneDeep","omit","AtrcWrap","AtrcLabel","AtrcButton","AtrcIcon","AtrcNotice","AtrcButtonGroup","AtrcPreviewFile","AtrcControlSelect","AtrcControlText","AtrcPrefix","AtrcPanelRow","SelfHostedFile","props","_props$type","type","_props$value","value","frm","data","_props$addButtonProps","addButtonProps","_props$removeButtonPr","removeButtonProps","frameProps","_props$onChange","onChange","_value$frm","_value$data","wp","media","createElement","isDismissible","memoFrameProps","title","button","text","multiple","library","openMediaUploadFrame","frame","on","attachments","state","get","toJSON","setMedia","open","id","newProps","slice","push","files","select","_select","getMedia","map","obj","context","className","includes","key","fileName","source_url","_extends","hasIcon","variant","onClick","icon","length","ExternalFile","_props$value2","_props$onChange2","doOnChange","newVal","newData","url","clonedValue","src","label","AtrcControlFile","_props$label","_props$variant","_props$className","_props$type2","_props$onChange3","_props$allowSource","allowSource","_props$allowSelf","allowSelf","_props$allowExternal","allowExternal","_props$selectSourcePr","selectSourceProps","defaultProps","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","setMediaFrom","setAttr","valueCloned","resetProps","options"],"sources":["D:/wamp/www/atrc-package/atrc/packages/controls/control-file/index.js"],"sourcesContent":["import React from 'react';\n\n/*Attributes Structure\r\nType Object\r\n{\r\n    frm: '',\r\n    data: [\r\n        {\r\n            id: '',\r\n            url: '',\r\n        },\r\n        {\r\n            id: '',\r\n            url: '',\r\n        },\r\n    ],\r\n}\r\n\r\nmap(obj, (currentValue, currentKey) => ( { value: key, label: key } ))\r\n\r\nwp_enqueue_media(); is needed to work this\r\n* */\r\n\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { useMemo, useState } from '@wordpress/element';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\nimport { BsPlus, BsTrash } from 'react-icons/bs';\r\n\r\nimport { cloneDeep, omit } from 'lodash';\r\n\r\n/*Atoms*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\n\r\n/* Molecules */\r\nimport AtrcNotice from '../../molecules/notice';\r\nimport AtrcButtonGroup from '../../molecules/button-group';\r\nimport AtrcPreviewFile from '../../molecules/preview-file';\r\n\r\n/* Controls */\r\nimport AtrcControlSelect from '../control-select';\r\nimport AtrcControlText from '../control-text';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\nimport AtrcPanelRow from '../../molecules/panel-row';\r\n\r\n/*Local*/\r\n/* urlOnly display a text url only\r\nbuttonOnly display a button only\r\n*/\r\nconst SelfHostedFile = (props) => {\r\n\tconst {\r\n\t\ttype = '',\r\n\t\tvalue = {\r\n\t\t\tfrm: '',\r\n\t\t\tdata: [],\r\n\t\t},\r\n\t\taddButtonProps = {},\r\n\t\tremoveButtonProps = {},\r\n\t\tframeProps,\r\n\t\tonChange = () => {},\r\n\t} = props;\r\n\r\n\tconst { frm = '', data = [] } = value;\r\n\r\n\tif (!(typeof wp !== 'undefined' && wp.media)) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice isDismissible={false}>\r\n\t\t\t\t{__('Add wp_enqueue_media(); on the page', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst memoFrameProps = useMemo(() => {\r\n\t\tif (frameProps) {\r\n\t\t\treturn frameProps;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttitle: __('Select or upload file', 'atrc-prefix-atrc'),\r\n\t\t\tbutton: {\r\n\t\t\t\ttext: __('Select', 'atrc-prefix-atrc'),\r\n\t\t\t},\r\n\t\t\tmultiple: false,\r\n\t\t\tlibrary: {\r\n\t\t\t\ttype: 'image',\r\n\t\t\t},\r\n\t\t};\r\n\t}, [frameProps]);\r\n\r\n\tconst openMediaUploadFrame = () => {\r\n\t\tconst frame = wp.media(cloneDeep(memoFrameProps));\r\n\r\n\t\tframe.on('select', () => {\r\n\t\t\tconst attachments = frame.state().get('selection').toJSON();\r\n\t\t\tsetMedia(attachments);\r\n\t\t});\r\n\r\n\t\tframe.open();\r\n\t};\r\n\r\n\tconst setMedia = (media) => {\r\n\t\tif (!media || !media[0].id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst newProps = {\r\n\t\t\tfrm: value.frm || '',\r\n\t\t\tdata: [],\r\n\t\t};\r\n\r\n\t\tif (memoFrameProps.multiple) {\r\n\t\t\tnewProps.data = media.slice(0);\r\n\t\t} else {\r\n\t\t\tnewProps.data.push(media[0]);\r\n\t\t}\r\n\t\tonChange(newProps);\r\n\t};\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst files = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst { getMedia } = select(coreStore);\r\n\t\t\treturn data && '' === frm\r\n\t\t\t\t? data.map((obj) => getMedia(obj.id, { context: 'view' }))\r\n\t\t\t\t: null;\r\n\t\t},\r\n\t\t[data, frm]\r\n\t);\r\n\r\n\tif (frm !== '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcPanelRow\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('control-file-self-hosted'),\r\n\t\t\t\t'at-flx-col',\r\n\t\t\t\t'at-al-itm-st'\r\n\t\t\t)}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && files\r\n\t\t\t\t? files.map((obj, key) => (\r\n\t\t\t\t\t\t<AtrcPreviewFile\r\n\t\t\t\t\t\t\tfileName={obj && obj.source_url}\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t  ))\r\n\t\t\t\t: null}\r\n\t\t\t<AtrcButtonGroup>\r\n\t\t\t\t<AtrcButton\r\n\t\t\t\t\thasIcon={true}\r\n\t\t\t\t\tvariant='primary'\r\n\t\t\t\t\tonClick={openMediaUploadFrame}\r\n\t\t\t\t\t{...omit(addButtonProps, 'text')}>\r\n\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\ticon={BsPlus}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* eslint-disable-next-line no-nested-ternary */}\r\n\t\t\t\t\t{addButtonProps.text\r\n\t\t\t\t\t\t? addButtonProps.text\r\n\t\t\t\t\t\t: // eslint-disable-next-line no-nested-ternary\r\n\t\t\t\t\t\tdata.length > 0\r\n\t\t\t\t\t\t? memoFrameProps.multiple\r\n\t\t\t\t\t\t\t? __('Replace files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: __('Replace file', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t: memoFrameProps.multiple\r\n\t\t\t\t\t\t? __('Add files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t: __('Add file', 'atrc-prefix-atrc')}\r\n\t\t\t\t</AtrcButton>\r\n\t\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && data.length > 0 ? (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\thasIcon={true}\r\n\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst newProps = {\r\n\t\t\t\t\t\t\t\tfrm: value.frm || '',\r\n\t\t\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tonChange(newProps);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t{...omit(removeButtonProps, 'text')}>\r\n\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\ticon={BsTrash}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{removeButtonProps.text\r\n\t\t\t\t\t\t\t? removeButtonProps.text\r\n\t\t\t\t\t\t\t: // eslint-disable-next-line no-nested-ternary\r\n\t\t\t\t\t\t\tmemoFrameProps.multiple\r\n\t\t\t\t\t\t\t? __('Reset files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: __('Remove file', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t) : null}\r\n\t\t\t</AtrcButtonGroup>\r\n\t\t</AtrcPanelRow>\r\n\t);\r\n};\r\n\r\nconst ExternalFile = (props) => {\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst { data } = value;\r\n\r\n\tconst doOnChange = (newVal) => {\r\n\t\tconst newData = [\r\n\t\t\t{\r\n\t\t\t\turl: newVal,\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst clonedValue = cloneDeep(value);\r\n\t\tclonedValue.data = newData;\r\n\t\tonChange(clonedValue);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AtrcPanelRow>\r\n\t\t\t{data && data[0] && data[0].url ? (\r\n\t\t\t\t<AtrcPreviewFile src={data[0].url} />\r\n\t\t\t) : null}\r\n\r\n\t\t\t<AtrcControlText\r\n\t\t\t\tlabel={__('File URL', 'atrc-prefix-atrc')}\r\n\t\t\t\tvalue={data && data[0] && data[0].url}\r\n\t\t\t\ttype='url'\r\n\t\t\t\tonChange={doOnChange}\r\n\t\t\t/>\r\n\t\t</AtrcPanelRow>\r\n\t);\r\n};\r\n\r\nconst AtrcControlFile = (props) => {\r\n\tconst {\r\n\t\tlabel = '',\r\n\t\tvalue,\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\ttype = '',\r\n\t\tonChange = () => {},\r\n\t\tallowSource = true,\r\n\t\tallowSelf = true,\r\n\t\tallowExternal = true,\r\n\t\tframeProps,\r\n\t\tselectSourceProps = {},\r\n\t\taddButtonProps,\r\n\t\tremoveButtonProps,\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst [frm, setMediaFrom] = useState(value.frm);\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tif ('frm' === type) {\r\n\t\t\tsetMediaFrom(newVal);\r\n\t\t}\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-file'),\r\n\t\t\t\t'at-flx-grw-1',\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-file') + '-' + variant : '',\r\n\t\t\t\t'urlOnly' === type ? 'at-flx at-al-itm-end at-jfy-cont-btw at-gap' : ''\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && label ? (\r\n\t\t\t\t<AtrcLabel>{label}</AtrcLabel>\r\n\t\t\t) : null}\r\n\t\t\t{['urlOnly'].includes(type) ? (\r\n\t\t\t\t<AtrcControlText\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tvalue={value && value.data && value.data[0] && value.data[0].url}\r\n\t\t\t\t\ttype='url'\r\n\t\t\t\t\tonChange={(newVal) => {\r\n\t\t\t\t\t\tconst valueCloned = cloneDeep(value);\r\n\t\t\t\t\t\tif (!('frm' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.frm = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!('data' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.data = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!valueCloned.data[0]) {\r\n\t\t\t\t\t\t\tvalueCloned.data[0] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalueCloned.data[0].url = newVal;\r\n\t\t\t\t\t\tonChange(valueCloned);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tresetProps={{\r\n\t\t\t\t\t\tclassName: classnames('at-gap', 'at-flx-grw-1'),\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && allowSource ? (\r\n\t\t\t\t<AtrcControlSelect\r\n\t\t\t\t\tlabel={__('File source', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={frm}\r\n\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('Self hosted', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('External', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: 'external',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tonChange={(newVal) => setAttr(newVal, 'frm')}\r\n\t\t\t\t\t{...selectSourceProps}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowSelf && !frm ? (\r\n\t\t\t\t<SelfHostedFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\tframeProps={frameProps}\r\n\t\t\t\t\taddButtonProps={addButtonProps}\r\n\t\t\t\t\tremoveButtonProps={removeButtonProps}\r\n\t\t\t\t\t{...defaultProps}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowExternal && 'external' === frm ? (\r\n\t\t\t\t<ExternalFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default AtrcControlFile;\r\n"],"mappings":"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","ignoreList":[]}