{"version":3,"names":["React","__","DateTimePicker","useRef","dateI18n","getSettings","BsX","classnames","AtrcWrap","AtrcIcon","AtrcText","AtrcButton","AtrcDropdown","AtrcPrefix","UserDateToggle","_ref","isOpen","onClick","date","dateFormat","formats","createElement","variant","UserDateForm","_ref2","_ref2$label","label","onClose","onChange","onUpdateDate","newDate","settings","is12HourTime","test","time","toLowerCase","replace","split","reverse","join","className","tag","type","icon","size","startOfWeek","l10n","__nextRemoveHelpButton","__nextRemoveResetButton","currentDate","is12Hour","AtrcControlDateTimePicker","_ref3","_ref3$contentLabel","contentLabel","rowref","width","popoverProps","placement","focusOnMount","renderToggle","_ref4","onToggle","renderContent","_ref5","newVal"],"sources":["D:/wamp/www/atrc-package/atrc/packages/controls/control-date-time-picker/index.js"],"sourcesContent":["import React from 'react';\n\n/*Attributes Structure\r\nType string\r\n**/\r\n\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { DateTimePicker } from '@wordpress/components';\r\n\r\nimport { useRef } from '@wordpress/element';\r\n\r\nimport { dateI18n, getSettings } from '@wordpress/date';\r\n\r\n/*Library*/\r\nimport { BsX } from 'react-icons/bs';\r\nimport classnames from 'classnames';\r\n\r\n/*Atoms*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcText from '../../atoms/text';\r\nimport AtrcButton from '../../atoms/button';\r\n\r\n/* Molecules */\r\nimport AtrcDropdown from '../../molecules/dropdown';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/* Local */\r\nfunction UserDateToggle({ isOpen, onClick, date }) {\r\n\tconst dateFormat = getSettings().formats.date;\r\n\r\n\treturn (\r\n\t\t<AtrcButton\r\n\t\t\tvariant='link'\r\n\t\t\taria-expanded={isOpen}\r\n\t\t\taria-label={__('Select date: Date', 'atrc-prefix-atrc')}\r\n\t\t\tonClick={onClick}>\r\n\t\t\t{date\r\n\t\t\t\t? dateI18n(dateFormat, date)\r\n\t\t\t\t: __('Immediately', 'atrc-prefix-atrc')}\r\n\t\t</AtrcButton>\r\n\t);\r\n}\r\n\r\nfunction UserDateForm({\r\n\tlabel = __('Date', 'atrc-prefix-atrc'),\r\n\tonClose,\r\n\tdate,\r\n\tonChange,\r\n}) {\r\n\tconst onUpdateDate = (newDate) => {\r\n\t\tonChange(newDate);\r\n\t\tonClose();\r\n\t};\r\n\r\n\tconst settings = getSettings();\r\n\r\n\t// To know if the current timezone is a 12 hour time with look for \"a\" in the time format\r\n\t// We also make sure this a is not escaped by a \"/\"\r\n\tconst is12HourTime = /a(?!\\\\)/i.test(\r\n\t\tsettings.formats.time\r\n\t\t\t.toLowerCase() // Test only the lower case a.\r\n\t\t\t.replace(/\\\\\\\\/g, '') // Replace \"//\" with empty strings.\r\n\t\t\t.split('')\r\n\t\t\t.reverse()\r\n\t\t\t.join('') // Reverse the string and test for \"a\" not followed by a slash.\r\n\t);\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('date-time-picker-cont'))}>\r\n\t\t\t<AtrcWrap\r\n\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t'at-flx',\r\n\t\t\t\t\t'at-al-itm-ctr',\r\n\t\t\t\t\t'at-jfy-cont-btw',\r\n\t\t\t\t\t'at-bdr',\r\n\t\t\t\t\t'at-m',\r\n\t\t\t\t\tAtrcPrefix('date-time-picker-cont-hdr')\r\n\t\t\t\t)}>\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\ttag='h6'\r\n\t\t\t\t\tclassName={classnames(AtrcPrefix('m-0'), 'at-m')}>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</AtrcText>\r\n\r\n\t\t\t\t{onClose && (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\tlabel={__('Close', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t\tonClick={onClose}>\r\n\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\ticon={BsX}\r\n\t\t\t\t\t\t\tsize='16'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t)}\r\n\t\t\t</AtrcWrap>\r\n\r\n\t\t\t<DateTimePicker\r\n\t\t\t\tstartOfWeek={getSettings().l10n.startOfWeek}\r\n\t\t\t\t__nextRemoveHelpButton\r\n\t\t\t\t__nextRemoveResetButton\r\n\t\t\t\tcurrentDate={date}\r\n\t\t\t\tonChange={onUpdateDate}\r\n\t\t\t\tis12Hour={is12HourTime}\r\n\t\t\t/>\r\n\t\t</AtrcWrap>\r\n\t);\r\n}\r\n\r\nexport function AtrcControlDateTimePicker({\r\n\tcontentLabel = __('Date', 'atrc-prefix-atrc'),\r\n\tdate,\r\n\tonChange,\r\n}) {\r\n\tconst rowref = useRef();\r\n\treturn (\r\n\t\t<AtrcDropdown\r\n\t\t\twidth='280px'\r\n\t\t\tpopoverProps={{ rowref, placement: 'bottom-start' }}\r\n\t\t\tfocusOnMount\r\n\t\t\trenderToggle={({ isOpen, onToggle }) => (\r\n\t\t\t\t<UserDateToggle\r\n\t\t\t\t\tisOpen={isOpen}\r\n\t\t\t\t\tonClick={onToggle}\r\n\t\t\t\t\tdate={date}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\trenderContent={({ onClose }) => (\r\n\t\t\t\t<UserDateForm\r\n\t\t\t\t\tlabel={contentLabel}\r\n\t\t\t\t\tonClose={onClose}\r\n\t\t\t\t\tdate={date}\r\n\t\t\t\t\tonChange={(newVal) => {\r\n\t\t\t\t\t\tonChange(newVal.replace('T', ' '));\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default AtrcControlDateTimePicker;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;AACA;;AAEA;AACA,SAASC,EAAE,QAAQ,iBAAiB;AAEpC,SAASC,cAAc,QAAQ,uBAAuB;AAEtD,SAASC,MAAM,QAAQ,oBAAoB;AAE3C,SAASC,QAAQ,EAAEC,WAAW,QAAQ,iBAAiB;;AAEvD;AACA,SAASC,GAAG,QAAQ,gBAAgB;AACpC,OAAOC,UAAU,MAAM,YAAY;;AAEnC;AACA,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,UAAU,MAAM,oBAAoB;;AAE3C;AACA,OAAOC,YAAY,MAAM,0BAA0B;;AAEnD;AACA,OAAOC,UAAU,MAAM,mBAAmB;;AAE1C;AACA,SAASC,cAAcA,CAAAC,IAAA,EAA4B;EAAA,IAAzBC,MAAM,GAAAD,IAAA,CAANC,MAAM;IAAEC,OAAO,GAAAF,IAAA,CAAPE,OAAO;IAAEC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EAC9C,IAAMC,UAAU,GAAGd,WAAW,CAAC,CAAC,CAACe,OAAO,CAACF,IAAI;EAE7C,oBACClB,KAAA,CAAAqB,aAAA,CAACV,UAAU;IACVW,OAAO,EAAC,MAAM;IACd,iBAAeN,MAAO;IACtB,cAAYf,EAAE,CAAC,mBAAmB,EAAE,kBAAkB,CAAE;IACxDgB,OAAO,EAAEA;EAAQ,GAChBC,IAAI,GACFd,QAAQ,CAACe,UAAU,EAAED,IAAI,CAAC,GAC1BjB,EAAE,CAAC,aAAa,EAAE,kBAAkB,CAC5B,CAAC;AAEf;AAEA,SAASsB,YAAYA,CAAAC,KAAA,EAKlB;EAAA,IAAAC,WAAA,GAAAD,KAAA,CAJFE,KAAK;IAALA,KAAK,GAAAD,WAAA,cAAGxB,EAAE,CAAC,MAAM,EAAE,kBAAkB,CAAC,GAAAwB,WAAA;IACtCE,OAAO,GAAAH,KAAA,CAAPG,OAAO;IACPT,IAAI,GAAAM,KAAA,CAAJN,IAAI;IACJU,QAAQ,GAAAJ,KAAA,CAARI,QAAQ;EAER,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,OAAO,EAAK;IACjCF,QAAQ,CAACE,OAAO,CAAC;IACjBH,OAAO,CAAC,CAAC;EACV,CAAC;EAED,IAAMI,QAAQ,GAAG1B,WAAW,CAAC,CAAC;;EAE9B;EACA;EACA,IAAM2B,YAAY,GAAG,UAAU,CAACC,IAAI,CACnCF,QAAQ,CAACX,OAAO,CAACc,IAAI,CACnBC,WAAW,CAAC,CAAC,CAAC;EAAA,CACdC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;EAAA,CACrBC,KAAK,CAAC,EAAE,CAAC,CACTC,OAAO,CAAC,CAAC,CACTC,IAAI,CAAC,EAAE,CAAC,CAAC;EACZ,CAAC;EACD,oBACCvC,KAAA,CAAAqB,aAAA,CAACb,QAAQ;IAACgC,SAAS,EAAEjC,UAAU,CAACM,UAAU,CAAC,uBAAuB,CAAC;EAAE,gBACpEb,KAAA,CAAAqB,aAAA,CAACb,QAAQ;IACRgC,SAAS,EAAEjC,UAAU,CACpB,QAAQ,EACR,eAAe,EACf,iBAAiB,EACjB,QAAQ,EACR,MAAM,EACNM,UAAU,CAAC,2BAA2B,CACvC;EAAE,gBACFb,KAAA,CAAAqB,aAAA,CAACX,QAAQ;IACR+B,GAAG,EAAC,IAAI;IACRD,SAAS,EAAEjC,UAAU,CAACM,UAAU,CAAC,KAAK,CAAC,EAAE,MAAM;EAAE,GAChDa,KACQ,CAAC,EAEVC,OAAO,iBACP3B,KAAA,CAAAqB,aAAA,CAACV,UAAU;IACVW,OAAO,EAAC,MAAM;IACdI,KAAK,EAAEzB,EAAE,CAAC,OAAO,EAAE,kBAAkB,CAAE;IACvCgB,OAAO,EAAEU;EAAQ,gBACjB3B,KAAA,CAAAqB,aAAA,CAACZ,QAAQ;IACRiC,IAAI,EAAC,WAAW;IAChBC,IAAI,EAAErC,GAAI;IACVsC,IAAI,EAAC;EAAI,CACT,CACU,CAEJ,CAAC,eAEX5C,KAAA,CAAAqB,aAAA,CAACnB,cAAc;IACd2C,WAAW,EAAExC,WAAW,CAAC,CAAC,CAACyC,IAAI,CAACD,WAAY;IAC5CE,sBAAsB;IACtBC,uBAAuB;IACvBC,WAAW,EAAE/B,IAAK;IAClBU,QAAQ,EAAEC,YAAa;IACvBqB,QAAQ,EAAElB;EAAa,CACvB,CACQ,CAAC;AAEb;AAEA,OAAO,SAASmB,yBAAyBA,CAAAC,KAAA,EAItC;EAAA,IAAAC,kBAAA,GAAAD,KAAA,CAHFE,YAAY;IAAZA,YAAY,GAAAD,kBAAA,cAAGpD,EAAE,CAAC,MAAM,EAAE,kBAAkB,CAAC,GAAAoD,kBAAA;IAC7CnC,IAAI,GAAAkC,KAAA,CAAJlC,IAAI;IACJU,SAAQ,GAAAwB,KAAA,CAARxB,QAAQ;EAER,IAAM2B,MAAM,GAAGpD,MAAM,CAAC,CAAC;EACvB,oBACCH,KAAA,CAAAqB,aAAA,CAACT,YAAY;IACZ4C,KAAK,EAAC,OAAO;IACbC,YAAY,EAAE;MAAEF,MAAM,EAANA,MAAM;MAAEG,SAAS,EAAE;IAAe,CAAE;IACpDC,YAAY;IACZC,YAAY,EAAE,SAAAA,aAAAC,KAAA;MAAA,IAAG7C,MAAM,GAAA6C,KAAA,CAAN7C,MAAM;QAAE8C,QAAQ,GAAAD,KAAA,CAARC,QAAQ;MAAA,oBAChC9D,KAAA,CAAAqB,aAAA,CAACP,cAAc;QACdE,MAAM,EAAEA,MAAO;QACfC,OAAO,EAAE6C,QAAS;QAClB5C,IAAI,EAAEA;MAAK,CACX,CAAC;IAAA,CACD;IACF6C,aAAa,EAAE,SAAAA,cAAAC,KAAA;MAAA,IAAGrC,OAAO,GAAAqC,KAAA,CAAPrC,OAAO;MAAA,oBACxB3B,KAAA,CAAAqB,aAAA,CAACE,YAAY;QACZG,KAAK,EAAE4B,YAAa;QACpB3B,OAAO,EAAEA,OAAQ;QACjBT,IAAI,EAAEA,IAAK;QACXU,QAAQ,EAAE,SAAAA,SAACqC,MAAM,EAAK;UACrBrC,SAAQ,CAACqC,MAAM,CAAC7B,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACnC;MAAE,CACF,CAAC;IAAA;EACD,CACF,CAAC;AAEJ;AAEA,eAAee,yBAAyB","ignoreList":[]}