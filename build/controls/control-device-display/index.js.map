{"version":3,"names":["__","sprintf","useMemo","classnames","isArray","isEmpty","map","cloneDeep","AtrcControlToggle","AtrcPanelTools","AtrcPanelRow","AtrcAvailableDevices","AtrcPrefix","getNewVal","value","key","RenderToggle","_ref","onChange","allowedDevices","Devices","dev","tab","iDx","on","React","createElement","className","name","label","title","checked","AtrcControlDeviceDisplay","props","_props$label","_props$className","_props$variant","variant","_props$value","_props$onChange","_props$allowedDevices","defaultProps","_objectWithoutProperties","_excluded","setAttr","newVal","type","valueCloned","DisplayTabs","hasValue","onDeselect","_extends","resetAll","tools","activeItems"],"sources":["D:/wamp/www/atrc-package/atrc/packages/controls/control-device-display/index.js"],"sourcesContent":["/*Attributes Structure\r\nType object{\r\n    xs:'',\r\n    sm:'',\r\n    md:'',\r\n    lg:'',\r\n    xl:'',\r\n    xxl:'',\r\n}\r\n**/\r\n\r\n/*WordPress*/\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\nimport { isArray, isEmpty, map, cloneDeep } from 'lodash';\r\n\r\n/*Controls*/\r\nimport AtrcControlToggle from '../control-toggle';\r\n\r\n/* Molecules */\r\nimport AtrcPanelTools from '../../molecules/panel-tools';\r\nimport AtrcPanelRow from '../../molecules/panel-row';\r\n\r\n/*Utils*/\r\nimport AtrcAvailableDevices from '../../utils/available-devices';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local*/\r\nconst getNewVal = (value, key) => {\r\n\tif (!value) {\r\n\t\treturn true;\r\n\t}\r\n\treturn !value[key];\r\n};\r\n\r\nconst RenderToggle = ({ value, onChange, allowedDevices }) => {\r\n\tconst Devices = () => {\r\n\t\tif (isArray(allowedDevices)) {\r\n\t\t\treturn allowedDevices;\r\n\t\t}\r\n\t\treturn AtrcAvailableDevices();\r\n\t};\r\n\r\n\tconst dev = Devices();\r\n\r\n\treturn dev.map(function (tab, iDx) {\r\n\t\tif (!tab.on) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<AtrcPanelRow\r\n\t\t\t\tclassName={classnames('at-m')}\r\n\t\t\t\tkey={iDx}>\r\n\t\t\t\t<AtrcControlToggle\r\n\t\t\t\t\tkey={tab.name}\r\n\t\t\t\t\tlabel={sprintf(\r\n\t\t\t\t\t\t// translators: %s: placeholder for title\r\n\t\t\t\t\t\t__('Hide on %s.', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\ttab.title\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tchecked={value && value[tab.name]}\r\n\t\t\t\t\tonChange={() => onChange(getNewVal(value, tab.name), tab.name)}\r\n\t\t\t\t/>\r\n\t\t\t</AtrcPanelRow>\r\n\t\t);\r\n\t});\r\n};\r\n\r\nconst AtrcControlDeviceDisplay = (props) => {\r\n\tconst {\r\n\t\tlabel = __('Device display', 'atrc-prefix-atrc'),\r\n\t\tclassName = '',\r\n\t\tvariant = '',\r\n\t\tvalue = {},\r\n\t\tonChange = () => {},\r\n\t\tallowedDevices = true,\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst DisplayTabs = useMemo(() => {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'display',\r\n\t\t\t\ttitle: label,\r\n\t\t\t\thasValue: !isEmpty(value),\r\n\t\t\t\tonDeselect: () => onChange({}),\r\n\t\t\t},\r\n\t\t];\r\n\t}, []);\r\n\r\n\t/* Return null since no device */\r\n\tif (!allowedDevices) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcPanelTools\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-device-d'),\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-device-d') + '-' + variant : ''\r\n\t\t\t)}\r\n\t\t\tlabel={label}\r\n\t\t\tresetAll={() => onChange({})}\r\n\t\t\ttools={DisplayTabs}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{(activeItems) =>\r\n\t\t\t\tmap(activeItems, (tab, iDx) => (\r\n\t\t\t\t\t<RenderToggle\r\n\t\t\t\t\t\tkey={iDx}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={setAttr}\r\n\t\t\t\t\t\tallowedDevices={allowedDevices}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t</AtrcPanelTools>\r\n\t);\r\n};\r\nexport default AtrcControlDeviceDisplay;\r\n"],"mappings":"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"}