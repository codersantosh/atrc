{"version":3,"names":["useEntityProp","store","coreStore","forwardRef","__","sprintf","useSelect","AtrcWrap","AtrcImg","getMediaSourceUrlBySizeSlug","media","slug","media_details","sizes","source_url","AtrcPostFeaturedImage","props","ref","postType","postId","htmlTag","linkOptions","size","defaultProps","featuredImage","setFeaturedImage","select","getMedia","context","mediaUrl","React","createElement","_extends","tag","src","alt","alt_text"],"sources":["D:/wamp/www/atrc-package/atrc/packages/query/post-featured-image/index.js"],"sourcesContent":["/*WordPress*/\r\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/* Inbuilt */\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcImg from '../../atoms/img';\r\n\r\n/* Local */\r\nfunction getMediaSourceUrlBySizeSlug(media, slug) {\r\n\treturn media?.media_details?.sizes?.[slug]?.source_url || media?.source_url;\r\n}\r\nconst AtrcPostFeaturedImage = (props, ref) => {\r\n\tconst {\r\n\t\tpostType,\r\n\t\tpostId,\r\n\t\thtmlTag,\r\n\t\tlinkOptions,\r\n\t\tsize = 'full',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tconst [featuredImage, setFeaturedImage] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'featured_media',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst media = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst { getMedia } = select(coreStore);\r\n\t\t\tif (featuredImage) {\r\n\t\t\t\treturn getMedia(featuredImage, {\r\n\t\t\t\t\tcontext: 'view',\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\t[featuredImage]\r\n\t);\r\n\r\n\tconst mediaUrl = getMediaSourceUrlBySizeSlug(media, size);\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...defaultProps}\r\n\t\t\tref={ref}\r\n\t\t\ttag='figure'>\r\n\t\t\t{mediaUrl ? (\r\n\t\t\t\t<AtrcImg\r\n\t\t\t\t\tsrc={mediaUrl}\r\n\t\t\t\t\talt={\r\n\t\t\t\t\t\tmedia && media.alt_text\r\n\t\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t\t// translators: %s: The image's alt text.\r\n\t\t\t\t\t\t\t\t\t__('Featured image: %s', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\t\t\tmedia.alt_text\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t: __('Featured image', 'atrc-prefix-atrc')\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t__('Not featured image found!', 'atrc-prefix-atrc')\r\n\t\t\t)}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default forwardRef(AtrcPostFeaturedImage);\r\n"],"mappings":";AAAA;AACA,SAASA,aAAa,EAAEC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACxE,SAASC,UAAU,QAAQ,oBAAoB;AAC/C,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,OAAO,MAAM,iBAAiB;;AAErC;AACA,SAASC,2BAA2BA,CAACC,KAAK,EAAEC,IAAI,EAAE;EACjD,OAAOD,KAAK,EAAEE,aAAa,EAAEC,KAAK,GAAGF,IAAI,CAAC,EAAEG,UAAU,IAAIJ,KAAK,EAAEI,UAAU;AAC5E;AACA,MAAMC,qBAAqB,GAAGA,CAACC,KAAK,EAAEC,GAAG,KAAK;EAC7C,MAAM;IACLC,QAAQ;IACRC,MAAM;IACNC,OAAO;IACPC,WAAW;IACXC,IAAI,GAAG,MAAM;IACb,GAAGC;EACJ,CAAC,GAAGP,KAAK;;EAET;EACA,MAAM,CAACQ,aAAa,EAAEC,gBAAgB,CAAC,GAAGzB,aAAa,CACtD,UAAU,EACVkB,QAAQ,EACR,gBAAgB,EAChBC,MACD,CAAC;EAED,MAAMT,KAAK,GAAGJ,SAAS,CACrBoB,MAAM,IAAK;IACX,MAAM;MAAEC;IAAS,CAAC,GAAGD,MAAM,CAACxB,SAAS,CAAC;IACtC,IAAIsB,aAAa,EAAE;MAClB,OAAOG,QAAQ,CAACH,aAAa,EAAE;QAC9BI,OAAO,EAAE;MACV,CAAC,CAAC;IACH;IACA,OAAO,CAAC,CAAC;EACV,CAAC,EACD,CAACJ,aAAa,CACf,CAAC;EAED,MAAMK,QAAQ,GAAGpB,2BAA2B,CAACC,KAAK,EAAEY,IAAI,CAAC;EACzD,oBACCQ,KAAA,CAAAC,aAAA,CAACxB,QAAQ,EAAAyB,QAAA,KACJT,YAAY;IAChBN,GAAG,EAAEA,GAAI;IACTgB,GAAG,EAAC;EAAQ,IACXJ,QAAQ,gBACRC,KAAA,CAAAC,aAAA,CAACvB,OAAO;IACP0B,GAAG,EAAEL,QAAS;IACdM,GAAG,EACFzB,KAAK,IAAIA,KAAK,CAAC0B,QAAQ,GACpB/B,OAAO;IACP;IACAD,EAAE,CAAC,oBAAoB,EAAE,kBAAkB,CAAC,EAC5CM,KAAK,CAAC0B,QACP,CAAC,GACAhC,EAAE,CAAC,gBAAgB,EAAE,kBAAkB;EAC1C,CACD,CAAC,GAEFA,EAAE,CAAC,2BAA2B,EAAE,kBAAkB,CAE1C,CAAC;AAEb,CAAC;AAED,eAAeD,UAAU,CAACY,qBAAqB,CAAC"}