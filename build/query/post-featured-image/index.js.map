{"version":3,"names":["forwardRef","useEntityProp","store","coreStore","useSelect","__","sprintf","AtrcWrap","AtrcImg","getMediaSourceUrlBySizeSlug","media","slug","_media$media_details","media_details","sizes","source_url","AtrcPostFeaturedImage","props","ref","postType","postId","htmlTag","linkOptions","_props$size","size","defaultProps","_objectWithoutProperties","_excluded","_useEntityProp","_useEntityProp2","_slicedToArray","featuredImage","setFeaturedImage","select","_select","getMedia","context","mediaUrl","React","createElement","_extends","tag","src","alt","alt_text"],"sources":["D:/wamp/www/atrc-package/atrc/packages/query/post-featured-image/index.js"],"sourcesContent":["/*React*/\r\nimport { forwardRef } from 'react';\r\n\r\n/*WordPress*/\r\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/* Inbuilt */\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcImg from '../../atoms/img';\r\n\r\n/* Local */\r\nfunction getMediaSourceUrlBySizeSlug(media, slug) {\r\n\treturn media?.media_details?.sizes?.[slug]?.source_url || media?.source_url;\r\n}\r\nconst AtrcPostFeaturedImage = (props, ref) => {\r\n\tconst {\r\n\t\tpostType,\r\n\t\tpostId,\r\n\t\thtmlTag,\r\n\t\tlinkOptions,\r\n\t\tsize = 'full',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tconst [featuredImage, setFeaturedImage] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'featured_media',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst media = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst { getMedia } = select(coreStore);\r\n\t\t\tif (featuredImage) {\r\n\t\t\t\treturn getMedia(featuredImage, {\r\n\t\t\t\t\tcontext: 'view',\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\t[featuredImage]\r\n\t);\r\n\r\n\tconst mediaUrl = getMediaSourceUrlBySizeSlug(media, size);\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...defaultProps}\r\n\t\t\tref={ref}\r\n\t\t\ttag='figure'>\r\n\t\t\t{mediaUrl ? (\r\n\t\t\t\t<AtrcImg\r\n\t\t\t\t\tsrc={mediaUrl}\r\n\t\t\t\t\talt={\r\n\t\t\t\t\t\tmedia && media.alt_text\r\n\t\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t\t// translators: %s: The image's alt text.\r\n\t\t\t\t\t\t\t\t\t__('Featured image: %s', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\t\t\tmedia.alt_text\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t: __('Featured image', 'atrc-prefix-atrc')\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t__('Not featured image found!', 'atrc-prefix-atrc')\r\n\t\t\t)}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default forwardRef(AtrcPostFeaturedImage);\r\n"],"mappings":";;;;;;;;;;AAAA;AACA,SAASA,UAAU,QAAQ,OAAO;;AAElC;AACA,SAASC,aAAa,EAAEC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACxE,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;;AAE7C;AACA,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,OAAO,MAAM,iBAAiB;;AAErC;AACA,SAASC,2BAA2BA,CAACC,KAAK,EAAEC,IAAI,EAAE;EAAA,IAAAC,oBAAA;EACjD,OAAO,CAAAF,KAAK,aAALA,KAAK,gBAAAE,oBAAA,GAALF,KAAK,CAAEG,aAAa,cAAAD,oBAAA,gBAAAA,oBAAA,GAApBA,oBAAA,CAAsBE,KAAK,cAAAF,oBAAA,gBAAAA,oBAAA,GAA3BA,oBAAA,CAA8BD,IAAI,CAAC,cAAAC,oBAAA,uBAAnCA,oBAAA,CAAqCG,UAAU,MAAIL,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK,UAAU;AAC5E;AACA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIC,KAAK,EAAEC,GAAG,EAAK;EAC7C,IACCC,QAAQ,GAMLF,KAAK,CANRE,QAAQ;IACRC,MAAM,GAKHH,KAAK,CALRG,MAAM;IACNC,OAAO,GAIJJ,KAAK,CAJRI,OAAO;IACPC,WAAW,GAGRL,KAAK,CAHRK,WAAW;IAAAC,WAAA,GAGRN,KAAK,CAFRO,IAAI;IAAJA,IAAI,GAAAD,WAAA,cAAG,MAAM,GAAAA,WAAA;IACVE,YAAY,GAAAC,wBAAA,CACZT,KAAK,EAAAU,SAAA;;EAET;EACA,IAAAC,cAAA,GAA0C3B,aAAa,CACtD,UAAU,EACVkB,QAAQ,EACR,gBAAgB,EAChBC,MACD,CAAC;IAAAS,eAAA,GAAAC,cAAA,CAAAF,cAAA;IALMG,aAAa,GAAAF,eAAA;IAAEG,gBAAgB,GAAAH,eAAA;EAOtC,IAAMnB,KAAK,GAAGN,SAAS,CACtB,UAAC6B,MAAM,EAAK;IACX,IAAAC,OAAA,GAAqBD,MAAM,CAAC9B,SAAS,CAAC;MAA9BgC,QAAQ,GAAAD,OAAA,CAARC,QAAQ;IAChB,IAAIJ,aAAa,EAAE;MAClB,OAAOI,QAAQ,CAACJ,aAAa,EAAE;QAC9BK,OAAO,EAAE;MACV,CAAC,CAAC;IACH;IACA,OAAO,CAAC,CAAC;EACV,CAAC,EACD,CAACL,aAAa,CACf,CAAC;EAED,IAAMM,QAAQ,GAAG5B,2BAA2B,CAACC,KAAK,EAAEc,IAAI,CAAC;EACzD,oBACCc,KAAA,CAAAC,aAAA,CAAChC,QAAQ,EAAAiC,QAAA,KACJf,YAAY;IAChBP,GAAG,EAAEA,GAAI;IACTuB,GAAG,EAAC;EAAQ,IACXJ,QAAQ,gBACRC,KAAA,CAAAC,aAAA,CAAC/B,OAAO;IACPkC,GAAG,EAAEL,QAAS;IACdM,GAAG,EACFjC,KAAK,IAAIA,KAAK,CAACkC,QAAQ,GACpBtC,OAAO;IACP;IACAD,EAAE,CAAC,oBAAoB,EAAE,kBAAkB,CAAC,EAC5CK,KAAK,CAACkC,QACP,CAAC,GACAvC,EAAE,CAAC,gBAAgB,EAAE,kBAAkB;EAC1C,CACD,CAAC,GAEFA,EAAE,CAAC,2BAA2B,EAAE,kBAAkB,CAE1C,CAAC;AAEb,CAAC;AAED,4BAAeL,UAAU,CAACgB,qBAAqB,CAAC"}