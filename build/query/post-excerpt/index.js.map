{"version":3,"names":["forwardRef","__","useEntityProp","AtrcWrap","AtrcPostExcerpt","props","ref","postType","postId","htmlTag","_props$excerptLength","excerptLength","_props$wordCountType","wordCountType","defaultProps","_objectWithoutProperties","_excluded","_useEntityProp","_useEntityProp2","_slicedToArray","rawExcerpt","setExcerpt","rawOrRenderedExcerpt","trim","trimmedExcerpt","split","join","excerptWithSpaces","numberOfSpaces","length","replaceAll","isTrimmed","excerptContent","React","createElement","_extends","tag"],"sources":["D:/wamp/www/atrc-package/atrc/packages/query/post-excerpt/index.js"],"sourcesContent":["/*React*/\r\nimport { forwardRef } from 'react';\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { useEntityProp } from '@wordpress/core-data';\r\n\r\n/* Inbuilt */\r\n\r\nimport AtrcWrap from '../../atoms/wrap';\r\n\r\n/* Local */\r\nconst AtrcPostExcerpt = (props, ref) => {\r\n\tconst {\r\n\t\tpostType,\r\n\t\tpostId,\r\n\t\thtmlTag,\r\n\t\texcerptLength = 55,\r\n\t\twordCountType = 'w',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst [\r\n\t\trawExcerpt,\r\n\t\t// eslint-disable-next-line no-unused-vars\r\n\t\tsetExcerpt,\r\n\t] = useEntityProp('postType', postType, 'excerpt', postId);\r\n\r\n\t/**\r\n\t * The excerpt length setting needs to be applied to both\r\n\t * the raw and the rendered excerpt depending on which is being used.\r\n\t */\r\n\tconst rawOrRenderedExcerpt = rawExcerpt.trim();\r\n\r\n\tlet trimmedExcerpt = '';\r\n\tif (wordCountType === 'w') {\r\n\t\ttrimmedExcerpt = rawOrRenderedExcerpt.split(' ', excerptLength).join(' ');\r\n\t} else if (wordCountType === 'ce') {\r\n\t\t/*\r\n\t\t * 1. Split the excerpt at the character limit,\r\n\t\t * then join the substrings back into one string.\r\n\t\t * 2. Count the number of spaces in the excerpt\r\n\t\t * by comparing the lengths of the string with and without spaces.\r\n\t\t * 3. Add the number to the length of the visible excerpt,\r\n\t\t * so that the spaces are excluded from the word count.\r\n\t\t */\r\n\t\tconst excerptWithSpaces = rawOrRenderedExcerpt\r\n\t\t\t.split('', excerptLength)\r\n\t\t\t.join('');\r\n\r\n\t\tconst numberOfSpaces =\r\n\t\t\texcerptWithSpaces.length - excerptWithSpaces.replaceAll(' ', '').length;\r\n\r\n\t\ttrimmedExcerpt = rawOrRenderedExcerpt\r\n\t\t\t.split('', excerptLength + numberOfSpaces)\r\n\t\t\t.join('');\r\n\t} else if (wordCountType === 'ci') {\r\n\t\ttrimmedExcerpt = rawOrRenderedExcerpt.split('', excerptLength).join('');\r\n\t}\r\n\r\n\tconst isTrimmed = trimmedExcerpt !== rawOrRenderedExcerpt;\r\n\r\n\tconst excerptContent = !isTrimmed\r\n\t\t? rawOrRenderedExcerpt || __('No excerpt found', 'atrc-prefix-atrc')\r\n\t\t: trimmedExcerpt;\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...defaultProps}\r\n\t\t\tref={ref}\r\n\t\t\ttag={htmlTag}>\r\n\t\t\t{excerptContent}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\nexport default forwardRef(AtrcPostExcerpt);\r\n"],"mappings":";;;;;;;;;;AAAA;AACA,SAASA,UAAU,QAAQ,OAAO;AAClC;AACA,SAASC,EAAE,QAAQ,iBAAiB;AAEpC,SAASC,aAAa,QAAQ,sBAAsB;;AAEpD;;AAEA,OAAOC,QAAQ,MAAM,kBAAkB;;AAEvC;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,KAAK,EAAEC,GAAG,EAAK;EACvC,IACCC,QAAQ,GAMLF,KAAK,CANRE,QAAQ;IACRC,MAAM,GAKHH,KAAK,CALRG,MAAM;IACNC,OAAO,GAIJJ,KAAK,CAJRI,OAAO;IAAAC,oBAAA,GAIJL,KAAK,CAHRM,aAAa;IAAbA,aAAa,GAAAD,oBAAA,cAAG,EAAE,GAAAA,oBAAA;IAAAE,oBAAA,GAGfP,KAAK,CAFRQ,aAAa;IAAbA,aAAa,GAAAD,oBAAA,cAAG,GAAG,GAAAA,oBAAA;IAChBE,YAAY,GAAAC,wBAAA,CACZV,KAAK,EAAAW,SAAA;EAET,IAAAC,cAAA,GAIIf,aAAa,CAAC,UAAU,EAAEK,QAAQ,EAAE,SAAS,EAAEC,MAAM,CAAC;IAAAU,eAAA,GAAAC,cAAA,CAAAF,cAAA;IAHzDG,UAAU,GAAAF,eAAA;IACV;IACAG,UAAU,GAAAH,eAAA;;EAGX;AACD;AACA;AACA;EACC,IAAMI,oBAAoB,GAAGF,UAAU,CAACG,IAAI,CAAC,CAAC;EAE9C,IAAIC,cAAc,GAAG,EAAE;EACvB,IAAIX,aAAa,KAAK,GAAG,EAAE;IAC1BW,cAAc,GAAGF,oBAAoB,CAACG,KAAK,CAAC,GAAG,EAAEd,aAAa,CAAC,CAACe,IAAI,CAAC,GAAG,CAAC;EAC1E,CAAC,MAAM,IAAIb,aAAa,KAAK,IAAI,EAAE;IAClC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAMc,iBAAiB,GAAGL,oBAAoB,CAC5CG,KAAK,CAAC,EAAE,EAAEd,aAAa,CAAC,CACxBe,IAAI,CAAC,EAAE,CAAC;IAEV,IAAME,cAAc,GACnBD,iBAAiB,CAACE,MAAM,GAAGF,iBAAiB,CAACG,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,CAACD,MAAM;IAExEL,cAAc,GAAGF,oBAAoB,CACnCG,KAAK,CAAC,EAAE,EAAEd,aAAa,GAAGiB,cAAc,CAAC,CACzCF,IAAI,CAAC,EAAE,CAAC;EACX,CAAC,MAAM,IAAIb,aAAa,KAAK,IAAI,EAAE;IAClCW,cAAc,GAAGF,oBAAoB,CAACG,KAAK,CAAC,EAAE,EAAEd,aAAa,CAAC,CAACe,IAAI,CAAC,EAAE,CAAC;EACxE;EAEA,IAAMK,SAAS,GAAGP,cAAc,KAAKF,oBAAoB;EAEzD,IAAMU,cAAc,GAAG,CAACD,SAAS,GAC9BT,oBAAoB,IAAIrB,EAAE,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,GAClEuB,cAAc;EAEjB,oBACCS,KAAA,CAAAC,aAAA,CAAC/B,QAAQ,EAAAgC,QAAA,KACJrB,YAAY;IAChBR,GAAG,EAAEA,GAAI;IACT8B,GAAG,EAAE3B;EAAQ,IACZuB,cACQ,CAAC;AAEb,CAAC;AACD,4BAAehC,UAAU,CAACI,eAAe,CAAC"}