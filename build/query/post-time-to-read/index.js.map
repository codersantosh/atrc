{"version":3,"names":["_n","_x","sprintf","useEntityBlockEditor","useEntityProp","useMemo","__unstableSerializeAndClean","unstableSerializeAndClean","count","wordCount","AtrcWrap","AVERAGE_READING_RATE","AtrcPostTimeToRead","props","postType","postId","htmlTag","defaultProps","_objectWithoutProperties","_excluded","_useEntityProp","_useEntityProp2","_slicedToArray","contentStructure","_useEntityBlockEditor","id","_useEntityBlockEditor2","blocks","minutesToReadString","content","Function","wordCountType","minutesToRead","Math","max","round","React","createElement","_extends","tag"],"sources":["D:/wamp/www/atrc-package/atrc/packages/query/post-time-to-read/index.js"],"sourcesContent":["/*WordPress*/\r\nimport { _n, _x, sprintf } from '@wordpress/i18n';\r\n\r\nimport { useEntityBlockEditor, useEntityProp } from '@wordpress/core-data';\r\n\r\nimport { useMemo } from '@wordpress/element';\r\n\r\nimport {\r\n\t// eslint-disable-next-line @wordpress/no-unsafe-wp-apis\r\n\t__unstableSerializeAndClean as unstableSerializeAndClean,\r\n} from '@wordpress/blocks';\r\n\r\nimport { count as wordCount } from '@wordpress/wordcount';\r\n\r\n/* Inbuilt */\r\nimport AtrcWrap from '../../atoms/wrap';\r\n\r\n/* Local */\r\nconst AVERAGE_READING_RATE = 189;\r\n\r\nconst AtrcPostTimeToRead = (props) => {\r\n\tconst { postType, postId, htmlTag, ...defaultProps } = props;\r\n\r\n\tconst [contentStructure] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'content',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst [blocks] = useEntityBlockEditor('postType', postType, {\r\n\t\tid: postId,\r\n\t});\r\n\r\n\tconst minutesToReadString = useMemo(() => {\r\n\t\t// Replicates the logic found in getEditedPostContent().\r\n\t\tlet content;\r\n\t\tif (contentStructure instanceof Function) {\r\n\t\t\tcontent = contentStructure({ blocks });\r\n\t\t} else if (blocks) {\r\n\t\t\t// If we have parsed blocks already, they should be our source of truth.\r\n\t\t\t// Parsing applies block deprecations and legacy block conversions that\r\n\t\t\t// unparsed content will not have.\r\n\t\t\tcontent = unstableSerializeAndClean(blocks);\r\n\t\t} else {\r\n\t\t\tcontent = contentStructure;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * translators: If your word count is based on single characters (e.g. East Asian characters),\r\n\t\t * enter 'characters_excluding_spaces' or 'characters_including_spaces'. Otherwise, enter 'words'.\r\n\t\t * Do not translate into your own language.\r\n\t\t */\r\n\t\tconst wordCountType = _x('words', 'Word count type. Do not translate!');\r\n\r\n\t\tconst minutesToRead = Math.max(\r\n\t\t\t1,\r\n\t\t\tMath.round(wordCount(content, wordCountType) / AVERAGE_READING_RATE)\r\n\t\t);\r\n\r\n\t\treturn sprintf(\r\n\t\t\t/* translators: %d is the number of minutes the post will take to read. */\r\n\t\t\t_n('%d minute', '%d minutes', minutesToRead),\r\n\t\t\tminutesToRead\r\n\t\t);\r\n\t}, [contentStructure, blocks]);\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...defaultProps}\r\n\t\t\ttag={htmlTag}>\r\n\t\t\t{minutesToReadString}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\nexport default AtrcPostTimeToRead;\r\n"],"mappings":";;;;;;;;;;AAAA;AACA,SAASA,EAAE,EAAEC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAEjD,SAASC,oBAAoB,EAAEC,aAAa,QAAQ,sBAAsB;AAE1E,SAASC,OAAO,QAAQ,oBAAoB;AAE5C;AACC;AACAC,2BAA2B,IAAIC,yBAAyB,QAClD,mBAAmB;AAE1B,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;;AAEzD;AACA,OAAOC,QAAQ,MAAM,kBAAkB;;AAEvC;AACA,IAAMC,oBAAoB,GAAG,GAAG;AAEhC,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,KAAK,EAAK;EACrC,IAAQC,QAAQ,GAAuCD,KAAK,CAApDC,QAAQ;IAAEC,MAAM,GAA+BF,KAAK,CAA1CE,MAAM;IAAEC,OAAO,GAAsBH,KAAK,CAAlCG,OAAO;IAAKC,YAAY,GAAAC,wBAAA,CAAKL,KAAK,EAAAM,SAAA;EAE5D,IAAAC,cAAA,GAA2BhB,aAAa,CACvC,UAAU,EACVU,QAAQ,EACR,SAAS,EACTC,MACD,CAAC;IAAAM,eAAA,GAAAC,cAAA,CAAAF,cAAA;IALMG,gBAAgB,GAAAF,eAAA;EAOvB,IAAAG,qBAAA,GAAiBrB,oBAAoB,CAAC,UAAU,EAAEW,QAAQ,EAAE;MAC3DW,EAAE,EAAEV;IACL,CAAC,CAAC;IAAAW,sBAAA,GAAAJ,cAAA,CAAAE,qBAAA;IAFKG,MAAM,GAAAD,sBAAA;EAIb,IAAME,mBAAmB,GAAGvB,OAAO,CAAC,YAAM;IACzC;IACA,IAAIwB,OAAO;IACX,IAAIN,gBAAgB,YAAYO,QAAQ,EAAE;MACzCD,OAAO,GAAGN,gBAAgB,CAAC;QAAEI,MAAM,EAANA;MAAO,CAAC,CAAC;IACvC,CAAC,MAAM,IAAIA,MAAM,EAAE;MAClB;MACA;MACA;MACAE,OAAO,GAAGtB,yBAAyB,CAACoB,MAAM,CAAC;IAC5C,CAAC,MAAM;MACNE,OAAO,GAAGN,gBAAgB;IAC3B;;IAEA;AACF;AACA;AACA;AACA;IACE,IAAMQ,aAAa,GAAG9B,EAAE,CAAC,OAAO,EAAE,oCAAoC,CAAC;IAEvE,IAAM+B,aAAa,GAAGC,IAAI,CAACC,GAAG,CAC7B,CAAC,EACDD,IAAI,CAACE,KAAK,CAAC1B,SAAS,CAACoB,OAAO,EAAEE,aAAa,CAAC,GAAGpB,oBAAoB,CACpE,CAAC;IAED,OAAOT,OAAO,EACb;IACAF,EAAE,CAAC,WAAW,EAAE,YAAY,EAAEgC,aAAa,CAAC,EAC5CA,aACD,CAAC;EACF,CAAC,EAAE,CAACT,gBAAgB,EAAEI,MAAM,CAAC,CAAC;EAE9B,oBACCS,KAAA,CAAAC,aAAA,CAAC3B,QAAQ,EAAA4B,QAAA,KACJrB,YAAY;IAChBsB,GAAG,EAAEvB;EAAQ,IACZY,mBACQ,CAAC;AAEb,CAAC;AACD,eAAehB,kBAAkB"}