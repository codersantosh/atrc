{"version":3,"names":["_n","_x","sprintf","useEntityBlockEditor","useEntityProp","forwardRef","useMemo","__unstableSerializeAndClean","unstableSerializeAndClean","count","wordCount","AtrcWrap","AVERAGE_READING_RATE","AtrcPostTimeToRead","props","ref","postType","postId","htmlTag","defaultProps","contentStructure","blocks","id","minutesToReadString","content","Function","wordCountType","minutesToRead","Math","max","round","React","createElement","_extends","tag"],"sources":["D:/wamp/www/atrc-package/atrc/packages/query/post-time-to-read/index.js"],"sourcesContent":["/*WordPress*/\r\nimport { _n, _x, sprintf } from '@wordpress/i18n';\r\n\r\nimport { useEntityBlockEditor, useEntityProp } from '@wordpress/core-data';\r\n\r\nimport { forwardRef, useMemo } from '@wordpress/element';\r\n\r\nimport {\r\n\t// eslint-disable-next-line @wordpress/no-unsafe-wp-apis\r\n\t__unstableSerializeAndClean as unstableSerializeAndClean,\r\n} from '@wordpress/blocks';\r\n\r\nimport { count as wordCount } from '@wordpress/wordcount';\r\n\r\n/* Inbuilt */\r\nimport AtrcWrap from '../../atoms/wrap';\r\n\r\n/* Local */\r\nconst AVERAGE_READING_RATE = 189;\r\n\r\nconst AtrcPostTimeToRead = (props, ref) => {\r\n\tconst { postType, postId, htmlTag, ...defaultProps } = props;\r\n\r\n\tconst [contentStructure] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'content',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst [blocks] = useEntityBlockEditor('postType', postType, {\r\n\t\tid: postId,\r\n\t});\r\n\r\n\tconst minutesToReadString = useMemo(() => {\r\n\t\t// Replicates the logic found in getEditedPostContent().\r\n\t\tlet content;\r\n\t\tif (contentStructure instanceof Function) {\r\n\t\t\tcontent = contentStructure({ blocks });\r\n\t\t} else if (blocks) {\r\n\t\t\t// If we have parsed blocks already, they should be our source of truth.\r\n\t\t\t// Parsing applies block deprecations and legacy block conversions that\r\n\t\t\t// unparsed content will not have.\r\n\t\t\tcontent = unstableSerializeAndClean(blocks);\r\n\t\t} else {\r\n\t\t\tcontent = contentStructure;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * translators: If your word count is based on single characters (e.g. East Asian characters),\r\n\t\t * enter 'characters_excluding_spaces' or 'characters_including_spaces'. Otherwise, enter 'words'.\r\n\t\t * Do not translate into your own language.\r\n\t\t */\r\n\t\tconst wordCountType = _x('words', 'Word count type. Do not translate!');\r\n\r\n\t\tconst minutesToRead = Math.max(\r\n\t\t\t1,\r\n\t\t\tMath.round(wordCount(content, wordCountType) / AVERAGE_READING_RATE)\r\n\t\t);\r\n\r\n\t\treturn sprintf(\r\n\t\t\t/* translators: %d is the number of minutes the post will take to read. */\r\n\t\t\t_n('%d minute', '%d minutes', minutesToRead),\r\n\t\t\tminutesToRead\r\n\t\t);\r\n\t}, [contentStructure, blocks]);\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...defaultProps}\r\n\t\t\tref={ref}\r\n\t\t\ttag={htmlTag}>\r\n\t\t\t{minutesToReadString}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\nexport default forwardRef(AtrcPostTimeToRead);\r\n"],"mappings":";AAAA;AACA,SAASA,EAAE,EAAEC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAEjD,SAASC,oBAAoB,EAAEC,aAAa,QAAQ,sBAAsB;AAE1E,SAASC,UAAU,EAAEC,OAAO,QAAQ,oBAAoB;AAExD;AACC;AACAC,2BAA2B,IAAIC,yBAAyB,QAClD,mBAAmB;AAE1B,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;;AAEzD;AACA,OAAOC,QAAQ,MAAM,kBAAkB;;AAEvC;AACA,MAAMC,oBAAoB,GAAG,GAAG;AAEhC,MAAMC,kBAAkB,GAAGA,CAACC,KAAK,EAAEC,GAAG,KAAK;EAC1C,MAAM;IAAEC,QAAQ;IAAEC,MAAM;IAAEC,OAAO;IAAE,GAAGC;EAAa,CAAC,GAAGL,KAAK;EAE5D,MAAM,CAACM,gBAAgB,CAAC,GAAGhB,aAAa,CACvC,UAAU,EACVY,QAAQ,EACR,SAAS,EACTC,MACD,CAAC;EAED,MAAM,CAACI,MAAM,CAAC,GAAGlB,oBAAoB,CAAC,UAAU,EAAEa,QAAQ,EAAE;IAC3DM,EAAE,EAAEL;EACL,CAAC,CAAC;EAEF,MAAMM,mBAAmB,GAAGjB,OAAO,CAAC,MAAM;IACzC;IACA,IAAIkB,OAAO;IACX,IAAIJ,gBAAgB,YAAYK,QAAQ,EAAE;MACzCD,OAAO,GAAGJ,gBAAgB,CAAC;QAAEC;MAAO,CAAC,CAAC;IACvC,CAAC,MAAM,IAAIA,MAAM,EAAE;MAClB;MACA;MACA;MACAG,OAAO,GAAGhB,yBAAyB,CAACa,MAAM,CAAC;IAC5C,CAAC,MAAM;MACNG,OAAO,GAAGJ,gBAAgB;IAC3B;;IAEA;AACF;AACA;AACA;AACA;IACE,MAAMM,aAAa,GAAGzB,EAAE,CAAC,OAAO,EAAE,oCAAoC,CAAC;IAEvE,MAAM0B,aAAa,GAAGC,IAAI,CAACC,GAAG,CAC7B,CAAC,EACDD,IAAI,CAACE,KAAK,CAACpB,SAAS,CAACc,OAAO,EAAEE,aAAa,CAAC,GAAGd,oBAAoB,CACpE,CAAC;IAED,OAAOV,OAAO,EACb;IACAF,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE2B,aAAa,CAAC,EAC5CA,aACD,CAAC;EACF,CAAC,EAAE,CAACP,gBAAgB,EAAEC,MAAM,CAAC,CAAC;EAE9B,oBACCU,KAAA,CAAAC,aAAA,CAACrB,QAAQ,EAAAsB,QAAA,KACJd,YAAY;IAChBJ,GAAG,EAAEA,GAAI;IACTmB,GAAG,EAAEhB;EAAQ,IACZK,mBACQ,CAAC;AAEb,CAAC;AACD,eAAelB,UAAU,CAACQ,kBAAkB,CAAC"}