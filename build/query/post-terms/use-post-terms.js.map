{"version":3,"names":["_data","require","_coreData","EMPTY_ARRAY","AtrcUsePostTerms","_ref","_term$visibility2","postId","_ref$taxonomy","taxonomy","_ref$showEmpty","showEmpty","_ref$showOnlyTopLevel","showOnlyTopLevel","term","useSelect","select","_taxObj$visibility","_select","coreStore","getTaxonomy","taxObj","visibility","publicly_queryable","slug","_term$visibility","visible","postTerms","isLoading","hasPostTerms","_select2","getEntityRecords","isResolving","args","per_page","context","hide_empty","post","parent","taxonomyArgs","terms","apply","length"],"sources":["D:/wamp/www/atrc-package/atrc/packages/query/post-terms/use-post-terms.js"],"sourcesContent":["/*WordPress*/\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/* Local */\r\nconst EMPTY_ARRAY = [];\r\n\r\nexport default function AtrcUsePostTerms({\r\n\tpostId,\r\n\ttaxonomy = 'category',\r\n\tshowEmpty = false,\r\n\tshowOnlyTopLevel = false,\r\n}) {\r\n\tconst term = useSelect(\r\n\t\t(select) => {\r\n\t\t\tif (!taxonomy) return {};\r\n\t\t\tconst { getTaxonomy } = select(coreStore);\r\n\t\t\tconst taxObj = getTaxonomy(taxonomy);\r\n\r\n\t\t\treturn taxObj?.visibility?.publicly_queryable ? taxObj : {};\r\n\t\t},\r\n\t\t[taxonomy]\r\n\t);\r\n\r\n\tconst { slug } = term;\r\n\r\n\treturn useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst visible = term?.visibility?.publicly_queryable;\r\n\t\t\tif (!visible) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpostTerms: EMPTY_ARRAY,\r\n\t\t\t\t\tisLoading: false,\r\n\t\t\t\t\thasPostTerms: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tconst { getEntityRecords, isResolving } = select(coreStore);\r\n\t\t\tconst args = {\r\n\t\t\t\tper_page: -1,\r\n\t\t\t\tcontext: 'view',\r\n\t\t\t\thide_empty: !showEmpty,\r\n\t\t\t};\r\n\t\t\tif (postId) {\r\n\t\t\t\targs.post = postId;\r\n\t\t\t}\r\n\t\t\tif (showOnlyTopLevel) {\r\n\t\t\t\targs.parent = 0;\r\n\t\t\t}\r\n\r\n\t\t\tconst taxonomyArgs = ['taxonomy', slug, args];\r\n\t\t\tconst terms = getEntityRecords(...taxonomyArgs);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tpostTerms: terms,\r\n\t\t\t\tisLoading: isResolving('getEntityRecords', taxonomyArgs),\r\n\t\t\t\thasPostTerms: !!terms?.length,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[\r\n\t\t\tpostId,\r\n\t\t\tterm?.visibility?.publicly_queryable,\r\n\t\t\tslug,\r\n\t\t\tshowEmpty,\r\n\t\t\tshowOnlyTopLevel,\r\n\t\t]\r\n\t);\r\n}\r\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAEA,IAAAC,SAAA,GAAAD,OAAA;AAHA;;AAKA;AACA,IAAME,WAAW,GAAG,EAAE;AAEP,SAASC,gBAAgBA,CAAAC,IAAA,EAKrC;EAAA,IAAAC,iBAAA;EAAA,IAJFC,MAAM,GAAAF,IAAA,CAANE,MAAM;IAAAC,aAAA,GAAAH,IAAA,CACNI,QAAQ;IAARA,QAAQ,GAAAD,aAAA,cAAG,UAAU,GAAAA,aAAA;IAAAE,cAAA,GAAAL,IAAA,CACrBM,SAAS;IAATA,SAAS,GAAAD,cAAA,cAAG,KAAK,GAAAA,cAAA;IAAAE,qBAAA,GAAAP,IAAA,CACjBQ,gBAAgB;IAAhBA,gBAAgB,GAAAD,qBAAA,cAAG,KAAK,GAAAA,qBAAA;EAExB,IAAME,IAAI,GAAG,IAAAC,eAAS,EACrB,UAACC,MAAM,EAAK;IAAA,IAAAC,kBAAA;IACX,IAAI,CAACR,QAAQ,EAAE,OAAO,CAAC,CAAC;IACxB,IAAAS,OAAA,GAAwBF,MAAM,CAACG,eAAS,CAAC;MAAjCC,WAAW,GAAAF,OAAA,CAAXE,WAAW;IACnB,IAAMC,MAAM,GAAGD,WAAW,CAACX,QAAQ,CAAC;IAEpC,OAAOY,MAAM,aAANA,MAAM,gBAAAJ,kBAAA,GAANI,MAAM,CAAEC,UAAU,cAAAL,kBAAA,eAAlBA,kBAAA,CAAoBM,kBAAkB,GAAGF,MAAM,GAAG,CAAC,CAAC;EAC5D,CAAC,EACD,CAACZ,QAAQ,CACV,CAAC;EAED,IAAQe,IAAI,GAAKV,IAAI,CAAbU,IAAI;EAEZ,OAAO,IAAAT,eAAS,EACf,UAACC,MAAM,EAAK;IAAA,IAAAS,gBAAA;IACX,IAAMC,OAAO,GAAGZ,IAAI,aAAJA,IAAI,gBAAAW,gBAAA,GAAJX,IAAI,CAAEQ,UAAU,cAAAG,gBAAA,uBAAhBA,gBAAA,CAAkBF,kBAAkB;IACpD,IAAI,CAACG,OAAO,EAAE;MACb,OAAO;QACNC,SAAS,EAAExB,WAAW;QACtByB,SAAS,EAAE,KAAK;QAChBC,YAAY,EAAE;MACf,CAAC;IACF;IAEA,IAAAC,QAAA,GAA0Cd,MAAM,CAACG,eAAS,CAAC;MAAnDY,gBAAgB,GAAAD,QAAA,CAAhBC,gBAAgB;MAAEC,WAAW,GAAAF,QAAA,CAAXE,WAAW;IACrC,IAAMC,IAAI,GAAG;MACZC,QAAQ,EAAE,CAAC,CAAC;MACZC,OAAO,EAAE,MAAM;MACfC,UAAU,EAAE,CAACzB;IACd,CAAC;IACD,IAAIJ,MAAM,EAAE;MACX0B,IAAI,CAACI,IAAI,GAAG9B,MAAM;IACnB;IACA,IAAIM,gBAAgB,EAAE;MACrBoB,IAAI,CAACK,MAAM,GAAG,CAAC;IAChB;IAEA,IAAMC,YAAY,GAAG,CAAC,UAAU,EAAEf,IAAI,EAAES,IAAI,CAAC;IAC7C,IAAMO,KAAK,GAAGT,gBAAgB,CAAAU,KAAA,SAAIF,YAAY,CAAC;IAE/C,OAAO;MACNZ,SAAS,EAAEa,KAAK;MAChBZ,SAAS,EAAEI,WAAW,CAAC,kBAAkB,EAAEO,YAAY,CAAC;MACxDV,YAAY,EAAE,CAAC,EAACW,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEE,MAAM;IAC9B,CAAC;EACF,CAAC,EACD,CACCnC,MAAM,EACNO,IAAI,aAAJA,IAAI,gBAAAR,iBAAA,GAAJQ,IAAI,CAAEQ,UAAU,cAAAhB,iBAAA,uBAAhBA,iBAAA,CAAkBiB,kBAAkB,EACpCC,IAAI,EACJb,SAAS,EACTE,gBAAgB,CAElB,CAAC;AACF"}