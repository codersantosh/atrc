{"version":3,"names":["useEffect","useRef","useState","AtrcUseDelayFunction","fn","dla","count","setCount","totalFn","setTotalFn","args","setArgs","timeoutIdRef","localCount","localArgs","localTotalFn","setLocalCount","current","setLocalArgs","arg","push","setLocalTotalFn","type","setTimeout","clearTimeout","window","dlaFn"],"sources":["D:/wamp/www/atrc-package/atrc/packages/utils/use-delay-function.js"],"sourcesContent":["/*WordPress*/\r\nimport { useEffect, useRef, useState } from '@wordpress/element';\r\n\r\n/*Library*/\r\nconst AtrcUseDelayFunction = (fn, dla = 2000) => {\r\n\tif (!fn) return;\r\n\tconst [count, setCount] = useState(0);\r\n\tconst [totalFn, setTotalFn] = useState(0);\r\n\tconst [args, setArgs] = useState([]);\r\n\tconst timeoutIdRef = useRef();\r\n\r\n\tconst localCount = useRef(count);\r\n\tconst localArgs = useRef(args);\r\n\tconst localTotalFn = useRef(totalFn);\r\n\r\n\tconst setLocalCount = () => {\r\n\t\tlocalCount.current++;\r\n\t\tsetCount(localCount.current);\r\n\t};\r\n\r\n\tconst setLocalArgs = (arg) => {\r\n\t\tlocalArgs.current.push(arg);\r\n\t\tsetArgs(localArgs.current);\r\n\t};\r\n\r\n\tconst setLocalTotalFn = (type) => {\r\n\t\tif ('add' === type) {\r\n\t\t\tlocalTotalFn.current++;\r\n\t\t} else {\r\n\t\t\tlocalTotalFn.current--;\r\n\t\t}\r\n\t\tsetTotalFn(localTotalFn.current);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (totalFn) {\r\n\t\t\ttimeoutIdRef.current = setTimeout(() => {\r\n\t\t\t\tfn(...args[count]);\r\n\t\t\t\tsetLocalCount();\r\n\t\t\t\tsetLocalTotalFn();\r\n\t\t\t}, dla);\r\n\t\t} else {\r\n\t\t\tclearTimeout();\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout();\r\n\t\t};\r\n\t}, [totalFn]);\r\n\r\n\tconst clearTimeout = () => {\r\n\t\twindow.clearTimeout(timeoutIdRef.current);\r\n\t};\r\n\r\n\tconst dlaFn = (...arg) => {\r\n\t\tsetLocalTotalFn('add');\r\n\t\tsetLocalArgs(arg);\r\n\t};\r\n\r\n\treturn { dlaFn, clearTimeout };\r\n};\r\n\r\nexport default AtrcUseDelayFunction;\r\n"],"mappings":"AAAA;AACA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,oBAAoB;;AAEhE;AACA,MAAMC,oBAAoB,GAAGA,CAACC,EAAE,EAAEC,GAAG,GAAG,IAAI,KAAK;EAChD,IAAI,CAACD,EAAE,EAAE;EACT,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,CAAC,CAAC;EACzC,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAMU,YAAY,GAAGX,MAAM,CAAC,CAAC;EAE7B,MAAMY,UAAU,GAAGZ,MAAM,CAACK,KAAK,CAAC;EAChC,MAAMQ,SAAS,GAAGb,MAAM,CAACS,IAAI,CAAC;EAC9B,MAAMK,YAAY,GAAGd,MAAM,CAACO,OAAO,CAAC;EAEpC,MAAMQ,aAAa,GAAGA,CAAA,KAAM;IAC3BH,UAAU,CAACI,OAAO,EAAE;IACpBV,QAAQ,CAACM,UAAU,CAACI,OAAO,CAAC;EAC7B,CAAC;EAED,MAAMC,YAAY,GAAIC,GAAG,IAAK;IAC7BL,SAAS,CAACG,OAAO,CAACG,IAAI,CAACD,GAAG,CAAC;IAC3BR,OAAO,CAACG,SAAS,CAACG,OAAO,CAAC;EAC3B,CAAC;EAED,MAAMI,eAAe,GAAIC,IAAI,IAAK;IACjC,IAAI,KAAK,KAAKA,IAAI,EAAE;MACnBP,YAAY,CAACE,OAAO,EAAE;IACvB,CAAC,MAAM;MACNF,YAAY,CAACE,OAAO,EAAE;IACvB;IACAR,UAAU,CAACM,YAAY,CAACE,OAAO,CAAC;EACjC,CAAC;EAEDjB,SAAS,CAAC,MAAM;IACf,IAAIQ,OAAO,EAAE;MACZI,YAAY,CAACK,OAAO,GAAGM,UAAU,CAAC,MAAM;QACvCnB,EAAE,CAAC,GAAGM,IAAI,CAACJ,KAAK,CAAC,CAAC;QAClBU,aAAa,CAAC,CAAC;QACfK,eAAe,CAAC,CAAC;MAClB,CAAC,EAAEhB,GAAG,CAAC;IACR,CAAC,MAAM;MACNmB,YAAY,CAAC,CAAC;IACf;IAEA,OAAO,MAAM;MACZA,YAAY,CAAC,CAAC;IACf,CAAC;EACF,CAAC,EAAE,CAAChB,OAAO,CAAC,CAAC;EAEb,MAAMgB,YAAY,GAAGA,CAAA,KAAM;IAC1BC,MAAM,CAACD,YAAY,CAACZ,YAAY,CAACK,OAAO,CAAC;EAC1C,CAAC;EAED,MAAMS,KAAK,GAAGA,CAAC,GAAGP,GAAG,KAAK;IACzBE,eAAe,CAAC,KAAK,CAAC;IACtBH,YAAY,CAACC,GAAG,CAAC;EAClB,CAAC;EAED,OAAO;IAAEO,KAAK;IAAEF;EAAa,CAAC;AAC/B,CAAC;AAED,eAAerB,oBAAoB"}