{"version":3,"names":["useEffect","useRef","useState","AtrcUseDelayFunction","fn","dla","arguments","length","undefined","_useState","_useState2","_slicedToArray","count","setCount","_useState3","_useState4","totalFn","setTotalFn","_useState5","_useState6","args","setArgs","timeoutIdRef","localCount","localArgs","localTotalFn","setLocalCount","current","setLocalArgs","arg","push","setLocalTotalFn","type","setTimeout","apply","_toConsumableArray","clearTimeout","window","dlaFn","_len","Array","_key"],"sources":["D:/wamp/www/atrc-package/atrc/packages/utils/use-delay-function.js"],"sourcesContent":["/*WordPress*/\r\nimport { useEffect, useRef, useState } from '@wordpress/element';\r\n\r\n/*Local*/\r\nconst AtrcUseDelayFunction = (fn, dla = 2000) => {\r\n\tif (!fn) return;\r\n\tconst [count, setCount] = useState(0);\r\n\tconst [totalFn, setTotalFn] = useState(0);\r\n\tconst [args, setArgs] = useState([]);\r\n\tconst timeoutIdRef = useRef();\r\n\r\n\tconst localCount = useRef(count);\r\n\tconst localArgs = useRef(args);\r\n\tconst localTotalFn = useRef(totalFn);\r\n\r\n\tconst setLocalCount = () => {\r\n\t\tlocalCount.current++;\r\n\t\tsetCount(localCount.current);\r\n\t};\r\n\r\n\tconst setLocalArgs = (arg) => {\r\n\t\tlocalArgs.current.push(arg);\r\n\t\tsetArgs(localArgs.current);\r\n\t};\r\n\r\n\tconst setLocalTotalFn = (type) => {\r\n\t\tif ('add' === type) {\r\n\t\t\tlocalTotalFn.current++;\r\n\t\t} else {\r\n\t\t\tlocalTotalFn.current--;\r\n\t\t}\r\n\t\tsetTotalFn(localTotalFn.current);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (totalFn) {\r\n\t\t\ttimeoutIdRef.current = setTimeout(() => {\r\n\t\t\t\tfn(...args[count]);\r\n\t\t\t\tsetLocalCount();\r\n\t\t\t\tsetLocalTotalFn();\r\n\t\t\t}, dla);\r\n\t\t} else {\r\n\t\t\tclearTimeout();\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout();\r\n\t\t};\r\n\t}, [totalFn]);\r\n\r\n\tconst clearTimeout = () => {\r\n\t\twindow.clearTimeout(timeoutIdRef.current);\r\n\t};\r\n\r\n\tconst dlaFn = (...arg) => {\r\n\t\tsetLocalTotalFn('add');\r\n\t\tsetLocalArgs(arg);\r\n\t};\r\n\r\n\treturn { dlaFn, clearTimeout };\r\n};\r\n\r\nexport default AtrcUseDelayFunction;\r\n"],"mappings":"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"}