{"version":3,"names":["_element","require","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","len","length","arr2","r","l","t","e","u","a","f","next","done","push","value","return","AtrcUseDelayFunction","fn","dla","arguments","undefined","_useState","useState","_useState2","count","setCount","_useState3","_useState4","totalFn","setTotalFn","_useState5","_useState6","args","setArgs","timeoutIdRef","useRef","localCount","localArgs","localTotalFn","setLocalCount","current","setLocalArgs","arg","setLocalTotalFn","type","useEffect","setTimeout","apply","clearTimeout","window","dlaFn","_len","_key","_default","exports","default"],"sources":["D:/wamp/www/atrc-package/atrc/packages/utils/use-delay-function.js"],"sourcesContent":["/*WordPress*/\r\nimport { useEffect, useRef, useState } from '@wordpress/element';\r\n\r\n/*Library*/\r\nconst AtrcUseDelayFunction = (fn, dla = 2000) => {\r\n\tif (!fn) return;\r\n\tconst [count, setCount] = useState(0);\r\n\tconst [totalFn, setTotalFn] = useState(0);\r\n\tconst [args, setArgs] = useState([]);\r\n\tconst timeoutIdRef = useRef();\r\n\r\n\tconst localCount = useRef(count);\r\n\tconst localArgs = useRef(args);\r\n\tconst localTotalFn = useRef(totalFn);\r\n\r\n\tconst setLocalCount = () => {\r\n\t\tlocalCount.current++;\r\n\t\tsetCount(localCount.current);\r\n\t};\r\n\r\n\tconst setLocalArgs = (arg) => {\r\n\t\tlocalArgs.current.push(arg);\r\n\t\tsetArgs(localArgs.current);\r\n\t};\r\n\r\n\tconst setLocalTotalFn = (type) => {\r\n\t\tif ('add' === type) {\r\n\t\t\tlocalTotalFn.current++;\r\n\t\t} else {\r\n\t\t\tlocalTotalFn.current--;\r\n\t\t}\r\n\t\tsetTotalFn(localTotalFn.current);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (totalFn) {\r\n\t\t\ttimeoutIdRef.current = setTimeout(() => {\r\n\t\t\t\tfn(...args[count]);\r\n\t\t\t\tsetLocalCount();\r\n\t\t\t\tsetLocalTotalFn();\r\n\t\t\t}, dla);\r\n\t\t} else {\r\n\t\t\tclearTimeout();\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout();\r\n\t\t};\r\n\t}, [totalFn]);\r\n\r\n\tconst clearTimeout = () => {\r\n\t\twindow.clearTimeout(timeoutIdRef.current);\r\n\t};\r\n\r\n\tconst dlaFn = (...arg) => {\r\n\t\tsetLocalTotalFn('add');\r\n\t\tsetLocalArgs(arg);\r\n\t};\r\n\r\n\treturn { dlaFn, clearTimeout };\r\n};\r\n\r\nexport default AtrcUseDelayFunction;\r\n"],"mappings":"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"}