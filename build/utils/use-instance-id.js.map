{"version":3,"names":["useMemo","instanceMap","WeakMap","createId","object","instances","get","set","AtrcUseInstanceId","prefix","preferredId","id","concat"],"sources":["D:/wamp/www/atrc-package/atrc/packages/utils/use-instance-id.js"],"sourcesContent":["import { useMemo } from 'react';\r\n\r\nconst instanceMap = new WeakMap();\r\n\r\n/* Using withInstanceId issues on treeshaking so needed to recrated this */\r\n/**\r\n * Creates a new id for a given object.\r\n *\r\n * @param object Object reference to create an id for.\r\n * @return The instance id (index).\r\n */\r\nfunction createId(object) {\r\n\tconst instances = instanceMap.get(object) || 0;\r\n\tinstanceMap.set(object, instances + 1);\r\n\treturn instances;\r\n}\r\n\r\n/**\r\n * Provides a unique instance ID.\r\n *\r\n * @param object        Object reference to create an id for.\r\n * @param [prefix]      Prefix for the unique id.\r\n * @param [preferredId] Default ID to use.\r\n * @return The unique instance id.\r\n */\r\nfunction AtrcUseInstanceId(object, prefix, preferredId) {\r\n\treturn useMemo(() => {\r\n\t\tif (preferredId) return preferredId;\r\n\t\tconst id = createId(object);\r\n\r\n\t\treturn prefix ? `${prefix}-${id}` : id;\r\n\t}, [object, preferredId, prefix]);\r\n}\r\n\r\nexport default AtrcUseInstanceId;\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,OAAO;AAE/B,IAAMC,WAAW,GAAG,IAAIC,OAAO,CAAC,CAAC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACC,MAAM,EAAE;EACzB,IAAMC,SAAS,GAAGJ,WAAW,CAACK,GAAG,CAACF,MAAM,CAAC,IAAI,CAAC;EAC9CH,WAAW,CAACM,GAAG,CAACH,MAAM,EAAEC,SAAS,GAAG,CAAC,CAAC;EACtC,OAAOA,SAAS;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,iBAAiBA,CAACJ,MAAM,EAAEK,MAAM,EAAEC,WAAW,EAAE;EACvD,OAAOV,OAAO,CAAC,YAAM;IACpB,IAAIU,WAAW,EAAE,OAAOA,WAAW;IACnC,IAAMC,EAAE,GAAGR,QAAQ,CAACC,MAAM,CAAC;IAE3B,OAAOK,MAAM,MAAAG,MAAA,CAAMH,MAAM,OAAAG,MAAA,CAAID,EAAE,IAAKA,EAAE;EACvC,CAAC,EAAE,CAACP,MAAM,EAAEM,WAAW,EAAED,MAAM,CAAC,CAAC;AAClC;AAEA,eAAeD,iBAAiB"}