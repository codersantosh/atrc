{"version":3,"names":["React","useState","useEffect","useRef","MenuGroup","MenuItem","find","classnames","AtrcWrap","AtrcLabel","AtrcButton","AtrcIcon","AtrcText","AtrcDropdown","AtrcTooltip","AtrcUseInstanceId","AtrcPrefix","AtrcDropdownDevice","_ref","_selectedTab$name","_ref$label","label","className","children","tabs","initialTabName","onSelect","_ref$wrapProps","wrapProps","_useState","_useState2","_slicedToArray","selectedTab","setSelectedTab","rowref","instanceId","handleTabSelection","tabName","nSelectedTab","name","selectedId","concat","length","createElement","_extends","variant","popoverProps","focusOnMount","renderToggle","_ref2","isOpen","onToggle","onClick","text","info","type","iconType","icon","size","iconSize","renderContent","props","flatMap","control","on","event","stopPropagation","onClose","id","tag","title","key","role"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/dropdown-device/index.js"],"sourcesContent":["import React from 'react';\n\n/** WordPress*/\r\nimport { useState, useEffect, useRef } from '@wordpress/element';\r\n\r\nimport { MenuGroup, MenuItem } from '@wordpress/components';\r\n\r\n/** Library*/\r\nimport { find } from 'lodash';\r\nimport classnames from 'classnames';\r\n\r\n/*Atoms*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcText from '../../atoms/text';\r\n\r\n/* Molecules */\r\nimport AtrcDropdown from '../dropdown';\r\nimport AtrcTooltip from '../tooltip';\r\n\r\n/* Utils */\r\nimport AtrcUseInstanceId from '../../utils/use-instance-id';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local*/\r\nexport function AtrcDropdownDevice({\r\n\tlabel = '',\r\n\tclassName,\r\n\tchildren,\r\n\ttabs,\r\n\tinitialTabName,\r\n\tonSelect,\r\n\twrapProps = {},\r\n}) {\r\n\tconst [selectedTab, setSelectedTab] = useState();\r\n\r\n\tconst rowref = useRef();\r\n\r\n\tconst instanceId = AtrcUseInstanceId(\r\n\t\tAtrcDropdownDevice,\r\n\t\t'atrc-dropdown-device'\r\n\t);\r\n\r\n\tconst handleTabSelection = (tabName) => {\r\n\t\tconst nSelectedTab = find(tabs, { name: tabName });\r\n\t\tsetSelectedTab(nSelectedTab);\r\n\t\tonSelect?.(tabName);\r\n\t};\r\n\r\n\tconst selectedId = `${instanceId}-${selectedTab?.name ?? 'none'}`;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!selectedTab?.name && tabs.length > 0) {\r\n\t\t\thandleTabSelection(initialTabName || tabs[0].name);\r\n\t\t}\r\n\t}, [tabs, selectedTab?.name, initialTabName]);\r\n\r\n\tif (!selectedTab) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...wrapProps}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('dropdown-device'),\r\n\t\t\t\tclassName,\r\n\t\t\t\twrapProps.className ? wrapProps.className : ''\r\n\t\t\t)}>\r\n\t\t\t{label && <AtrcLabel variant='dropdown-device-lbl'>{label}</AtrcLabel>}\r\n\t\t\t<AtrcDropdown\r\n\t\t\t\tpopoverProps={{ rowref }}\r\n\t\t\t\tfocusOnMount\r\n\t\t\t\trenderToggle={({ isOpen, onToggle }) => (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\tvariant='devices'\r\n\t\t\t\t\t\taria-expanded={isOpen}\r\n\t\t\t\t\t\tonClick={onToggle}>\r\n\t\t\t\t\t\t<AtrcTooltip text={selectedTab.info}>\r\n\t\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\t\ttype={selectedTab.iconType ? selectedTab.iconType : 'wp'}\r\n\t\t\t\t\t\t\t\ticon={selectedTab.icon}\r\n\t\t\t\t\t\t\t\tsize={selectedTab.iconSize || 16}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</AtrcTooltip>\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t)}\r\n\t\t\t\trenderContent={(props) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuGroup\r\n\t\t\t\t\t\t\tclassName={classnames(AtrcPrefix('dropdown-device-cont'))}>\r\n\t\t\t\t\t\t\t{tabs?.flatMap((control) => {\r\n\t\t\t\t\t\t\t\tif (control.on) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedTab(control);\r\n\t\t\t\t\t\t\t\t\t\t\t\tprops.onClose();\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tid={`${instanceId}-${control.name}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AtrcTooltip\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='at-flx at-al-itm-ctr at-gap'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={control.info}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={control.iconType ? control.iconType : 'wp'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={control.icon}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize={control.iconSize || 16}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AtrcText tag='span'>{control.title}</AtrcText>\r\n\t\t\t\t\t\t\t\t\t\t\t</AtrcTooltip>\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{selectedTab && (\r\n\t\t\t\t<AtrcWrap\r\n\t\t\t\t\tkey={selectedTab.name}\r\n\t\t\t\t\taria-labelledby={selectedId}\r\n\t\t\t\t\trole='tabpanel'\r\n\t\t\t\t\tid={`${selectedId}-view`}>\r\n\t\t\t\t\t{children(selectedTab)}\r\n\t\t\t\t</AtrcWrap>\r\n\t\t\t)}\r\n\t\t</AtrcWrap>\r\n\t);\r\n}\r\n\r\nexport default AtrcDropdownDevice;\r\n"],"mappings":"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","ignoreList":[]}