{"version":3,"names":["useState","useEffect","useRef","useInstanceId","MenuGroup","MenuItem","find","classnames","AtrcWrap","AtrcLabel","AtrcButton","AtrcIcon","AtrcWord","AtrcDropdown","AtrcTooltip","AtrcPrefix","AtrcDropdownDevice","label","className","children","tabs","initialTabName","onSelect","wrapProps","selectedTab","setSelectedTab","rowref","instanceId","handleTabSelection","tabName","nSelectedTab","name","selectedId","length","React","createElement","_extends","variant","popoverProps","focusOnMount","renderToggle","isOpen","onToggle","onClick","text","info","type","iconType","icon","size","iconSize","renderContent","props","flatMap","control","on","event","stopPropagation","onClose","id","tag","title","key","role"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/dropdown-device/index.js"],"sourcesContent":["/** WordPress*/\r\nimport { useState, useEffect, useRef } from '@wordpress/element';\r\n\r\nimport { useInstanceId } from '@wordpress/compose';\r\n\r\nimport { MenuGroup, MenuItem } from '@wordpress/components';\r\n\r\n/** Library*/\r\nimport { find } from 'lodash';\r\nimport classnames from 'classnames';\r\n\r\n/*Inbuilt*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcWord from '../../atoms/word';\r\n\r\nimport AtrcDropdown from '../dropdown';\r\nimport AtrcTooltip from '../tooltip';\r\n\r\n/*Inbuilt*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local Components*/\r\nexport function AtrcDropdownDevice({\r\n\tlabel = '',\r\n\tclassName,\r\n\tchildren,\r\n\ttabs,\r\n\tinitialTabName,\r\n\tonSelect,\r\n\twrapProps = {},\r\n}) {\r\n\tconst [selectedTab, setSelectedTab] = useState();\r\n\r\n\tconst rowref = useRef();\r\n\tconst instanceId = useInstanceId(AtrcDropdownDevice, 'tab-panel');\r\n\r\n\tconst handleTabSelection = (tabName) => {\r\n\t\tconst nSelectedTab = find(tabs, { name: tabName });\r\n\t\tsetSelectedTab(nSelectedTab);\r\n\t\tonSelect?.(tabName);\r\n\t};\r\n\r\n\tconst selectedId = `${instanceId}-${selectedTab?.name ?? 'none'}`;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!selectedTab?.name && tabs.length > 0) {\r\n\t\t\thandleTabSelection(initialTabName || tabs[0].name);\r\n\t\t}\r\n\t}, [tabs, selectedTab?.name, initialTabName]);\r\n\r\n\tif (!selectedTab) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\t{...wrapProps}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('dropdown-device'),\r\n\t\t\t\tclassName,\r\n\t\t\t\twrapProps.className ? wrapProps.className : ''\r\n\t\t\t)}>\r\n\t\t\t{label && <AtrcLabel variant='dropdown-device-lbl'>{label}</AtrcLabel>}\r\n\t\t\t<AtrcDropdown\r\n\t\t\t\tpopoverProps={{ rowref }}\r\n\t\t\t\tfocusOnMount\r\n\t\t\t\trenderToggle={({ isOpen, onToggle }) => (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\tvariant='devices'\r\n\t\t\t\t\t\taria-expanded={isOpen}\r\n\t\t\t\t\t\tonClick={onToggle}>\r\n\t\t\t\t\t\t<AtrcTooltip text={selectedTab.info}>\r\n\t\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\t\ttype={selectedTab.iconType ? selectedTab.iconType : 'wp'}\r\n\t\t\t\t\t\t\t\ticon={selectedTab.icon}\r\n\t\t\t\t\t\t\t\tsize={selectedTab.iconSize || 16}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</AtrcTooltip>\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t)}\r\n\t\t\t\trenderContent={(props) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuGroup\r\n\t\t\t\t\t\t\tclassName={classnames(AtrcPrefix('dropdown-device-cont'))}>\r\n\t\t\t\t\t\t\t{tabs?.flatMap((control) => {\r\n\t\t\t\t\t\t\t\tif (control.on) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedTab(control);\r\n\t\t\t\t\t\t\t\t\t\t\t\tprops.onClose();\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tid={`${instanceId}-${control.name}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AtrcTooltip\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='at-flx at-al-itm-ctr at-gap'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={control.info}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={control.iconType ? control.iconType : 'wp'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={control.icon}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize={control.iconSize || 16}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AtrcWord tag='span'>{control.title}</AtrcWord>\r\n\t\t\t\t\t\t\t\t\t\t\t</AtrcTooltip>\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{selectedTab && (\r\n\t\t\t\t<AtrcWrap\r\n\t\t\t\t\tkey={selectedTab.name}\r\n\t\t\t\t\taria-labelledby={selectedId}\r\n\t\t\t\t\trole='tabpanel'\r\n\t\t\t\t\tid={`${selectedId}-view`}>\r\n\t\t\t\t\t{children(selectedTab)}\r\n\t\t\t\t</AtrcWrap>\r\n\t\t\t)}\r\n\t\t</AtrcWrap>\r\n\t);\r\n}\r\n\r\nexport default AtrcDropdownDevice;\r\n"],"mappings":"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"}