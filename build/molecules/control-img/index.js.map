{"version":3,"names":["_i18n","require","_element","_blockEditor","_data","_classnames","_interopRequireDefault","_bs","_lodash","_wrap","_label","_select","_text","_button","_icon","_img","_panelTools","_notice","_panelRow","_tooltip","_prefixVars","_excluded","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ownKeys","e","r","t","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","_toPrimitive","_typeof","String","Symbol","toPrimitive","TypeError","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","arr2","l","iterator","u","a","f","next","done","return","isArray","SelfHostedImg","props","isFirstRender","useRef","wp","media","React","createElement","__","_props$value","_props$onChange","onChange","_value$frm","frm","_value$id","id","_value$sizes","sizes","_value$srcset","srcset","_value$alt","alt","_value$ttl","ttl","_value$sz","sz","_value$w","w","_value$h","h","_value$url","url","_useState","useState","_useState2","setMedia","_useState3","_useState4","imgSz","setImgSize","setAttrs","newVals","valueCloned","useEffect","attachment","fetch","success","attributes","imageSizes","useSelect","select","settings","blockEditorStore","getSettings","imageSizesOptions","useMemo","keyValues","reduce","accumulator","_ref","slug","label","options","currentValue","currentKey","current","mediaSize","_media$sizes$mediaSiz","width","height","abSrcset","concat","title","className","classnames","MediaUploadCheck","AtrcPrefix","src","MediaUpload","onSelect","allowedTypes","render","_ref2","open","Fragment","variant","onClick","type","icon","BsImage","text","BsTrash","wrapProps","defaultValue","ExternalImg","_props$value2","_props$onChange2","_value$frm2","_value$url2","_value$alt2","_value$ttl2","ImgDetails","_props$value3","_props$onChange3","_value$alt3","_value$ttl3","newVal","ImgSettings","_props$value4","_props$onChange4","_props$allowDetails","allowDetails","resetDetails","setAttr","hasTabValue","tab","isEmpty","AllTabs","tabs","hasValue","onDeselect","resetAll","tools","activeItems","map","iDx","AtrcControlImg","_props$label","_props$value5","_props$variant","_props$className","_props$onChange5","_props$allowSource","allowSource","_props$allowSelf","allowSelf","_props$allowExternal","allowExternal","_props$allowDetails2","_props$allowSettings","allowSettings","defaultProps","_value$frm3","setExternal","_default","exports"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/control-img/index.js"],"sourcesContent":["/*Attributes Structure\r\nType Object\r\n{\r\n    frm = '',\r\n    id = 0,\r\n    url ='',\r\n    alt ='',\r\n    ttl ='',\r\n    sz ='',\r\n    w ='',\r\n    h ='',\r\n}\r\n\r\nmap(obj, (currentValue, currentKey) => ( { value: key, label: key } ))\r\n* */\r\n\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { useEffect, useMemo, useState, useRef } from '@wordpress/element';\r\n\r\nimport {\r\n\tMediaUpload,\r\n\tMediaUploadCheck,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\nimport { BsImage, BsTrash } from 'react-icons/bs';\r\n\r\nimport { isEmpty, map, reduce } from 'lodash';\r\n\r\n/*Inbuilt*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcSelect from '../../atoms/select';\r\nimport AtrcText from '../../atoms/text';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcImg from '../../atoms/img';\r\n\r\nimport AtrcPanelTools from '../panel-tools';\r\nimport AtrcNotice from '../notice';\r\nimport AtrcPanelRow from '../panel-row';\r\nimport AtrcTooltip from '../tooltip';\r\n\r\n/*Inbuilt*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local Components*/\r\nconst SelfHostedImg = (props) => {\r\n\tconst isFirstRender = useRef(true);\r\n\r\n\tif (!(typeof wp !== 'undefined' && wp.media)) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice>\r\n\t\t\t\t{__('Add wp_enqueue_media(); on the page', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst {\r\n\t\tfrm = '',\r\n\t\tid = null,\r\n\t\tsizes = null,\r\n\t\tsrcset = '',\r\n\t\talt = null,\r\n\t\tttl = null,\r\n\t\tsz = 'full',\r\n\t\tw = null,\r\n\t\th = null,\r\n\t\turl = '',\r\n\t} = value;\r\n\r\n\t/* for local management */\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst [media, setMedia] = useState(null);\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst [imgSz, setImgSize] = useState(sz);\r\n\r\n\t/* On change handler */\r\n\tconst setAttrs = (newVals) => {\r\n\t\tconst valueCloned = Object.assign({}, value);\r\n\r\n\t\tonChange({\r\n\t\t\t...valueCloned,\r\n\t\t\t...newVals,\r\n\t\t});\r\n\t};\r\n\r\n\t/* Run at first, only once for first time*/\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tuseEffect(() => {\r\n\t\tif (id && !media) {\r\n\t\t\t/* Need to use wp.media becuase const { getMedia } = select(coreStore); doesnot provide same and alos required properties */\r\n\t\t\twp.media.attachment(id).fetch({\r\n\t\t\t\tsuccess(attachment) {\r\n\t\t\t\t\tif (attachment.attributes) {\r\n\t\t\t\t\t\tsetMedia(attachment.attributes);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst imageSizes = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst settings = select(blockEditorStore).getSettings();\r\n\t\t\treturn id && '' === frm ? settings.imageSizes : null;\r\n\t\t},\r\n\t\t[id, frm]\r\n\t);\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst imageSizesOptions = useMemo(() => {\r\n\t\tif (media && media.sizes) {\r\n\t\t\tconst keyValues = reduce(\r\n\t\t\t\timageSizes,\r\n\t\t\t\t(accumulator, { name, slug }) => {\r\n\t\t\t\t\taccumulator[slug] = { value: slug, label: name };\r\n\t\t\t\t\treturn accumulator;\r\n\t\t\t\t},\r\n\t\t\t\t{}\r\n\t\t\t);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tkeys: Object.keys(keyValues),\r\n\t\t\t\toptions: reduce(\r\n\t\t\t\t\tmedia.sizes,\r\n\t\t\t\t\t(accumulator, currentValue, currentKey) => {\r\n\t\t\t\t\t\tif (keyValues[currentKey]) {\r\n\t\t\t\t\t\t\taccumulator.push(keyValues[currentKey]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taccumulator.push({ value: currentKey, label: currentKey });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[]\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn null;\r\n\t}, [imageSizes, media]);\r\n\r\n\t/* set attributes when media change */\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tuseEffect(() => {\r\n\t\tif (isFirstRender.current) {\r\n\t\t\tisFirstRender.current = false;\r\n\t\t} else {\r\n\t\t\tif (!media || !media.id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst newVals = {\r\n\t\t\t\tid: media.id,\r\n\t\t\t};\r\n\r\n\t\t\tlet mediaSize = imgSz;\r\n\t\t\tif (!mediaSize) {\r\n\t\t\t\tmediaSize = 'full';\r\n\t\t\t}\r\n\t\t\tif (media.sizes && media.sizes[mediaSize] && media.sizes[mediaSize].url) {\r\n\t\t\t\tnewVals.url =\r\n\t\t\t\t\tmedia.sizes && media.sizes[mediaSize] && media.sizes[mediaSize].url\r\n\t\t\t\t\t\t? media.sizes[mediaSize].url\r\n\t\t\t\t\t\t: media.url;\r\n\t\t\t} else {\r\n\t\t\t\tnewVals.url = media.url;\r\n\t\t\t}\r\n\r\n\t\t\tif (media.sizes[mediaSize]) {\r\n\t\t\t\tconst { width, height, abSrcset } = media.sizes[mediaSize];\r\n\r\n\t\t\t\tnewVals.w = width + 'px';\r\n\t\t\t\tnewVals.h = height + 'px';\r\n\t\t\t\tnewVals.srcset = abSrcset;\r\n\t\t\t\tnewVals.sizes = `(max-width: ${width}px) 100vw, ${width}px)`;\r\n\t\t\t}\r\n\r\n\t\t\tnewVals.alt = media.alt;\r\n\t\t\tnewVals.ttl = media.title;\r\n\t\t\tnewVals.sz = mediaSize;\r\n\t\t\tsetAttrs(newVals);\r\n\t\t}\r\n\t}, [media, imgSz]);\r\n\r\n\tif (frm !== '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t<MediaUploadCheck>\r\n\t\t\t\t<AtrcWrap\r\n\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\tAtrcPrefix('ctrl-img-slf-hosted'),\r\n\t\t\t\t\t\t'at-pos',\r\n\t\t\t\t\t\t'at-flx-grw-1'\r\n\t\t\t\t\t)}>\r\n\t\t\t\t\t<AtrcImg\r\n\t\t\t\t\t\tsrc={url}\r\n\t\t\t\t\t\talt={alt}\r\n\t\t\t\t\t\ttitle={ttl}\r\n\t\t\t\t\t\tsizes={sizes}\r\n\t\t\t\t\t\tsrcset={srcset}\r\n\t\t\t\t\t\twidth={w}\r\n\t\t\t\t\t\theight={h}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t\t\t\t<MediaUpload\r\n\t\t\t\t\t\t\tonSelect={setMedia}\r\n\t\t\t\t\t\t\tallowedTypes={['image', 'video']}\r\n\t\t\t\t\t\t\ttitle={__(\r\n\t\t\t\t\t\t\t\t'Select or upload background media',\r\n\t\t\t\t\t\t\t\t'atrc-prefix-atrc'\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\tvalue={id}\r\n\t\t\t\t\t\t\trender={({ open }) => (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\t\t\t\t\tvariant='uploads'\r\n\t\t\t\t\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\t\t\t\t\t'at-gap',\r\n\t\t\t\t\t\t\t\t\t\t\t'at-flx',\r\n\t\t\t\t\t\t\t\t\t\t\t'at-al-itm-ctr',\r\n\t\t\t\t\t\t\t\t\t\t\t'at-jfy-cont-ctr',\r\n\t\t\t\t\t\t\t\t\t\t\t'at-w'\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tonClick={open}>\r\n\t\t\t\t\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\t\t\t\t\ticon={BsImage}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t{id\r\n\t\t\t\t\t\t\t\t\t\t\t? __('Replace media', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t\t\t\t: __('Add media', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t\t\t\t\t\t{id ? (\r\n\t\t\t\t\t\t\t\t\t\t<AtrcTooltip\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\t\t\t\t\t\tAtrcPrefix('uploads-del'),\r\n\t\t\t\t\t\t\t\t\t\t\t\t'at-pos'\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={__('Remove media', 'atrc-prefix-atrc')}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'at-bdr-rad',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'at-flx',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'at-w',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'at-h',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'at-al-itm-ctr',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'at-jfy-cont-ctr'\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='delete'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttrs({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={BsTrash}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t\t\t\t\t\t\t</AtrcTooltip>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</AtrcPanelRow>\r\n\t\t\t\t\t{imageSizesOptions && imageSizesOptions.options ? (\r\n\t\t\t\t\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t\t\t\t\t<AtrcSelect\r\n\t\t\t\t\t\t\t\tlabel={__('Image size', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t\t\t\twrapProps={{\r\n\t\t\t\t\t\t\t\t\tclassName: 'at-flx-grw-1',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tvalue={sz}\r\n\t\t\t\t\t\t\t\tdefaultValue='full'\r\n\t\t\t\t\t\t\t\toptions={imageSizesOptions.options}\r\n\t\t\t\t\t\t\t\tonChange={setImgSize}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</AtrcPanelRow>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</AtrcWrap>\r\n\t\t\t</MediaUploadCheck>\r\n\t\t</AtrcPanelRow>\r\n\t);\r\n};\r\n\r\nconst ExternalImg = (props) => {\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst { frm = '', url = '', alt = '', ttl = '' } = value;\r\n\r\n\tif (frm === '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t<AtrcWrap className={classnames(AtrcPrefix('ctrl-img-ext'))}>\r\n\t\t\t\t<AtrcImg\r\n\t\t\t\t\tclassName={classnames('at-m')}\r\n\t\t\t\t\tsrc={url}\r\n\t\t\t\t\talt={alt}\r\n\t\t\t\t\ttitle={ttl}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\tlabel={__('Image URL', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={url}\r\n\t\t\t\t\ttype='url'\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\t\t\t</AtrcWrap>\r\n\t\t</AtrcPanelRow>\r\n\t);\r\n};\r\n\r\nconst ImgDetails = (props) => {\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst { alt = '', ttl = '' } = value;\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('ctrl-img-img-details'))}>\r\n\t\t\t<AtrcLabel>{__('Image details', 'atrc-prefix-atrc')}</AtrcLabel>\r\n\t\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\tlabel={__('Alt text', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={alt}\r\n\t\t\t\t\tonChange={(newVal) => onChange(newVal, 'alt')}\r\n\t\t\t\t/>\r\n\t\t\t</AtrcPanelRow>\r\n\t\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\tlabel={__('Title', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={ttl}\r\n\t\t\t\t\tonChange={(newVal) => onChange(newVal, 'ttl')}\r\n\t\t\t\t/>\r\n\t\t\t</AtrcPanelRow>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst ImgSettings = (props) => {\r\n\tconst { value = {}, onChange = () => {}, allowDetails = true } = props;\r\n\r\n\tconst resetDetails = () => {\r\n\t\tconst valueCloned = Object.assign({}, value);\r\n\t\tdelete valueCloned.alt;\r\n\t\tdelete valueCloned.ttl;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = Object.assign({}, value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst hasTabValue = (tab) => {\r\n\t\tif (!value || isEmpty(value)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (tab === 'details') {\r\n\t\t\treturn !!(value.alt || value.ttl);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tconst AllTabs = useMemo(() => {\r\n\t\tconst tabs = [];\r\n\r\n\t\tif (allowDetails) {\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'details',\r\n\t\t\t\ttitle: __('Image details', 'atrc-prefix-atrc'),\r\n\t\t\t\thasValue: hasTabValue('details'),\r\n\t\t\t\tonDeselect: () => resetDetails(),\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn tabs;\r\n\t}, []);\r\n\r\n\tif (!allowDetails) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcPanelTools\r\n\t\t\tlabel={__('Settings', 'atrc-prefix-atrc')}\r\n\t\t\tresetAll={() => onChange({})}\r\n\t\t\ttools={AllTabs}>\r\n\t\t\t{(activeItems) =>\r\n\t\t\t\tmap(activeItems, (tab, iDx) => {\r\n\t\t\t\t\tif ('details' === tab) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ImgDetails\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tonChange={setAttr}\r\n\t\t\t\t\t\t\t\tkey={iDx}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</AtrcPanelTools>\r\n\t);\r\n};\r\n\r\nconst AtrcControlImg = (props) => {\r\n\tconst {\r\n\t\tlabel = '',\r\n\t\tvalue = {},\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\tonChange = () => {},\r\n\t\tallowSource = true,\r\n\t\tallowSelf = true,\r\n\t\tallowExternal = true,\r\n\t\tallowDetails = true,\r\n\t\tallowSettings = true,\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst { frm = '' } = value;\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = Object.assign({}, value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst setExternal = (newVal) => {\r\n\t\tconst valueCloned = Object.assign({}, value);\r\n\r\n\t\tdelete valueCloned.id;\r\n\t\tdelete valueCloned.sz;\r\n\t\tdelete valueCloned.url;\r\n\r\n\t\tvalueCloned.url = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-img'),\r\n\t\t\t\t'at-flx-grw-1',\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-img') + '-' + variant : ''\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{label && <AtrcLabel>{label}</AtrcLabel>}\r\n\t\t\t{allowSource && (\r\n\t\t\t\t<AtrcPanelRow className={classnames('at-m')}>\r\n\t\t\t\t\t<AtrcSelect\r\n\t\t\t\t\t\tlabel={__('Image source', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t\twrapProps={{\r\n\t\t\t\t\t\t\tclassName: 'at-flx-grw-1',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvalue={frm}\r\n\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: __('Self hosted', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: __('External', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\t\tvalue: 'ext',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonChange={(newVal) => setAttr(newVal, 'frm')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</AtrcPanelRow>\r\n\t\t\t)}\r\n\t\t\t{allowSelf && '' === frm ? (\r\n\t\t\t\t<SelfHostedImg\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowExternal && 'ext' === frm ? (\r\n\t\t\t\t<ExternalImg\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={setExternal}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowSettings && 'ext' === frm && (value.id || value.url) ? (\r\n\t\t\t\t<ImgSettings\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tallowDetails={allowDetails}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default AtrcControlImg;\r\n"],"mappings":"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"}