{"version":3,"names":["_element","require","_i18n","_coreData","_data","_classnames","_interopRequireDefault","_select2","_notice","_prefixVars","_excluded","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","AtrcUseIsPostTypeHierarchical","postType","useSelect","select","type","coreStore","getPostType","viewable","hierarchical","excludedPostTypes","AtrcControlGetPostTypeOptions","props","undefined","_props$tax","tax","_props$showOptionNone","showOptionNone","_props$optionNoneValu","optionNoneValue","postTypes","_getPostTypes","_select","getPostTypes","filteredPostTypes","per_page","filter","_ref","slug","includes","options","useMemo","baseOptions","forEach","_ref2","labels","taxonomies","push","label","singular_name","value","__","concat","AtrcControlSelectPostType","onChange","_props$showOptionNone2","_props$optionNoneValu2","_props$variant","variant","_props$className","className","defaultProps","React","createElement","autoDismiss","isDismissible","classnames","AtrcPrefix","_default","exports"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/control-select-post-type/index.js"],"sourcesContent":["/* WordPress*/\r\nimport { useMemo } from '@wordpress/element';\r\n\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\n/*Inbuilt*/\r\nimport AtrcSelect from '../../atoms/select';\r\n\r\nimport AtrcNotice from '../notice';\r\n\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/* Local*/\r\n/**\r\n * Hook that returns whether a specific post type is hierarchical.\r\n *\r\n * @param {string} postType The post type to check.\r\n * @return {boolean} Whether a specific post type is hierarchical.\r\n */\r\nexport function AtrcUseIsPostTypeHierarchical(postType) {\r\n\treturn useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst type = select(coreStore).getPostType(postType);\r\n\t\t\treturn type?.viewable && type?.hierarchical;\r\n\t\t},\r\n\t\t[postType]\r\n\t);\r\n}\r\nconst excludedPostTypes = [\r\n\t'attachment',\r\n\t'gutentor-fonts',\r\n\t'wp_template',\r\n\t'gutentor-icons',\r\n];\r\n\r\nexport function AtrcControlGetPostTypeOptions(props = {}) {\r\n\tconst { tax = '', showOptionNone = false, optionNoneValue = '' } = props;\r\n\r\n\tconst postTypes = useSelect((select) => {\r\n\t\tconst { getPostTypes } = select(coreStore);\r\n\r\n\t\tconst filteredPostTypes = getPostTypes({ per_page: -1 })?.filter(\r\n\t\t\t({ viewable, slug }) => viewable && !excludedPostTypes.includes(slug)\r\n\t\t);\r\n\t\treturn filteredPostTypes;\r\n\t}, []);\r\n\r\n\tconst options = useMemo(() => {\r\n\t\tconst baseOptions = [];\r\n\r\n\t\t(postTypes || []).forEach(({ labels, slug, taxonomies }) => {\r\n\t\t\tif (!tax) {\r\n\t\t\t\tbaseOptions.push({\r\n\t\t\t\t\tlabel: labels.singular_name,\r\n\t\t\t\t\tvalue: slug,\r\n\t\t\t\t});\r\n\t\t\t} else if (taxonomies.includes(tax)) {\r\n\t\t\t\tbaseOptions.push({\r\n\t\t\t\t\tlabel: labels.singular_name,\r\n\t\t\t\t\tvalue: slug,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (showOptionNone) {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: optionNoneValue,\r\n\t\t\t\t\tlabel: __('Select', 'atrc-prefix-atrc'),\r\n\t\t\t\t},\r\n\t\t\t\t...baseOptions,\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn baseOptions;\r\n\t}, [tax, postTypes, showOptionNone]);\r\n\r\n\treturn options;\r\n}\r\n\r\n/*AtrcControlSelectPostType*/\r\nfunction AtrcControlSelectPostType(props) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tvalue,\r\n\t\tonChange,\r\n\t\tshowOptionNone = true,\r\n\t\toptionNoneValue = '',\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst options = AtrcControlGetPostTypeOptions({\r\n\t\tshowOptionNone,\r\n\t\toptionNoneValue,\r\n\t});\r\n\r\n\tif (!options || !options.length) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice\r\n\t\t\t\tautoDismiss={false}\r\n\t\t\t\tisDismissible={false}>\r\n\t\t\t\t{__('No types found!', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcSelect\r\n\t\t\tlabel={label}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-select-post-type'),\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-select-post-type') + '-' + variant : ''\r\n\t\t\t)}\r\n\t\t\tvalue={value}\r\n\t\t\tonChange={onChange}\r\n\t\t\toptions={options}\r\n\t\t\t{...defaultProps}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default AtrcControlSelectPostType;\r\n"],"mappings":"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"}