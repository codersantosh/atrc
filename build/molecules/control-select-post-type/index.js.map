{"version":3,"names":["useMemo","__","store","coreStore","useSelect","classnames","AtrcSelect","AtrcNotice","AtrcPrefix","AtrcUseIsPostTypeHierarchical","postType","select","type","getPostType","viewable","hierarchical","excludedPostTypes","AtrcControlGetPostTypeOptions","props","tax","showOptionNone","optionNoneValue","postTypes","getPostTypes","filteredPostTypes","per_page","filter","slug","includes","options","baseOptions","forEach","labels","taxonomies","push","label","singular_name","value","AtrcControlSelectPostType","onChange","variant","className","defaultProps","length","React","createElement","autoDismiss","isDismissible","_extends"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/control-select-post-type/index.js"],"sourcesContent":["/* WordPress*/\r\nimport { useMemo } from '@wordpress/element';\r\n\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\n/*Inbuilt*/\r\nimport AtrcSelect from '../../atoms/select';\r\n\r\nimport AtrcNotice from '../notice';\r\n\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/* Local*/\r\n/**\r\n * Hook that returns whether a specific post type is hierarchical.\r\n *\r\n * @param {string} postType The post type to check.\r\n * @return {boolean} Whether a specific post type is hierarchical.\r\n */\r\nexport function AtrcUseIsPostTypeHierarchical(postType) {\r\n\treturn useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst type = select(coreStore).getPostType(postType);\r\n\t\t\treturn type?.viewable && type?.hierarchical;\r\n\t\t},\r\n\t\t[postType]\r\n\t);\r\n}\r\nconst excludedPostTypes = [\r\n\t'attachment',\r\n\t'gutentor-fonts',\r\n\t'wp_template',\r\n\t'gutentor-icons',\r\n];\r\n\r\nexport function AtrcControlGetPostTypeOptions(props = {}) {\r\n\tconst { tax = '', showOptionNone = false, optionNoneValue = '' } = props;\r\n\r\n\tconst postTypes = useSelect((select) => {\r\n\t\tconst { getPostTypes } = select(coreStore);\r\n\r\n\t\tconst filteredPostTypes = getPostTypes({ per_page: -1 })?.filter(\r\n\t\t\t({ viewable, slug }) => viewable && !excludedPostTypes.includes(slug)\r\n\t\t);\r\n\t\treturn filteredPostTypes;\r\n\t}, []);\r\n\r\n\tconst options = useMemo(() => {\r\n\t\tconst baseOptions = [];\r\n\r\n\t\t(postTypes || []).forEach(({ labels, slug, taxonomies }) => {\r\n\t\t\tif (!tax) {\r\n\t\t\t\tbaseOptions.push({\r\n\t\t\t\t\tlabel: labels.singular_name,\r\n\t\t\t\t\tvalue: slug,\r\n\t\t\t\t});\r\n\t\t\t} else if (taxonomies.includes(tax)) {\r\n\t\t\t\tbaseOptions.push({\r\n\t\t\t\t\tlabel: labels.singular_name,\r\n\t\t\t\t\tvalue: slug,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (showOptionNone) {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: optionNoneValue,\r\n\t\t\t\t\tlabel: __('Select', 'atrc-prefix-atrc'),\r\n\t\t\t\t},\r\n\t\t\t\t...baseOptions,\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn baseOptions;\r\n\t}, [tax, postTypes, showOptionNone]);\r\n\r\n\treturn options;\r\n}\r\n\r\n/*AtrcControlSelectPostType*/\r\nfunction AtrcControlSelectPostType(props) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tvalue,\r\n\t\tonChange,\r\n\t\tshowOptionNone = true,\r\n\t\toptionNoneValue = '',\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst options = AtrcControlGetPostTypeOptions({\r\n\t\tshowOptionNone,\r\n\t\toptionNoneValue,\r\n\t});\r\n\r\n\tif (!options || !options.length) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice\r\n\t\t\t\tautoDismiss={false}\r\n\t\t\t\tisDismissible={false}>\r\n\t\t\t\t{__('No types found!', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcSelect\r\n\t\t\tlabel={label}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-select-post-type'),\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-select-post-type') + '-' + variant : ''\r\n\t\t\t)}\r\n\t\t\tvalue={value}\r\n\t\t\tonChange={onChange}\r\n\t\t\toptions={options}\r\n\t\t\t{...defaultProps}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default AtrcControlSelectPostType;\r\n"],"mappings":"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"}