{"version":3,"names":["__","useMemo","useState","useSelect","store","coreStore","classnames","BsFile","BsX","cloneDeep","omit","AtrcWrap","AtrcLabel","AtrcSelect","AtrcText","AtrcButton","AtrcIcon","AtrcFile","AtrcNotice","AtrcButtonGroup","AtrcPrefix","SelfHostedFile","props","type","value","frm","data","addButtonProps","onChange","wp","media","React","createElement","frameProps","title","button","text","multiple","library","openMediaUploadFrame","frame","on","attachments","state","get","toJSON","setMedia","open","id","newProps","slice","push","files","select","getMedia","map","obj","context","className","includes","key","src","url","_extends","variant","onClick","icon","length","ExternalFile","label","AtrcControlFile","allowSource","allowSelf","allowExternal","defaultProps","setMediaFrom","setAttr","newVal","valueCloned","setExternal","size","resetProps","options"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/control-file/index.js"],"sourcesContent":["/*Attributes Structure\r\nType Object\r\n{\r\n    frm = '',\r\n\tdata=[\r\n\t\t{\r\n\t\t\tid:'',\r\n\t\t\turl:'',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:'',\r\n\t\t\turl:'',\r\n\t\t}\r\n\t]\r\n}\r\n\r\nmap(obj, (currentValue, currentKey) => ( { value: key, label: key } ))\r\n\r\nwp_enqueue_media(); is needed to work this\r\n* */\r\n\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { useMemo, useState } from '@wordpress/element';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\nimport { BsFile, BsX } from 'react-icons/bs';\r\n\r\nimport { cloneDeep, omit } from 'lodash';\r\n\r\n/*Inbuilt*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcSelect from '../../atoms/select';\r\nimport AtrcText from '../../atoms/text';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcFile from '../../atoms/file';\r\n\r\n\r\nimport AtrcNotice from '../notice';\r\nimport AtrcButtonGroup from '../button-group';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local*/\r\nconst SelfHostedFile = (props) => {\r\n\tconst {\r\n\t\ttype = '',\r\n\t\tvalue = {\r\n\t\t\tfrm: '',\r\n\t\t\tdata: [],\r\n\t\t},\r\n\t\taddButtonProps = {},\r\n\t\tonChange = () => {},\r\n\t} = props;\r\n\r\n\tconst { frm = '', data = [] } = value;\r\n\r\n\tif (!(typeof wp !== 'undefined' && wp.media)) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice>\r\n\t\t\t\t{__('Add wp_enqueue_media(); on the page', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst frameProps = useMemo(() => {\r\n\t\tif (props.frameProps) {\r\n\t\t\treturn props.frameProps;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttitle: __('Select or upload file', 'atrc-prefix-atrc'),\r\n\t\t\tbutton: {\r\n\t\t\t\ttext: __('Select', 'atrc-prefix-atrc'),\r\n\t\t\t},\r\n\t\t\tmultiple: false,\r\n\t\t\tlibrary: {\r\n\t\t\t\ttype: 'image',\r\n\t\t\t},\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst openMediaUploadFrame = () => {\r\n\t\tconst frame = wp.media(cloneDeep(frameProps));\r\n\r\n\t\tframe.on('select', () => {\r\n\t\t\tconst attachments = frame.state().get('selection').toJSON();\r\n\t\t\tsetMedia(attachments);\r\n\t\t});\r\n\r\n\t\tframe.open();\r\n\t};\r\n\r\n\tconst setMedia = (media) => {\r\n\t\tif (!media || !media[0].id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst newProps = {\r\n\t\t\tfrm: value.frm || '',\r\n\t\t\tdata: [],\r\n\t\t};\r\n\r\n\t\tif (frameProps.multiple) {\r\n\t\t\tnewProps.data = media.slice(0);\r\n\t\t} else {\r\n\t\t\tnewProps.data.push(media[0]);\r\n\t\t}\r\n\t\tonChange(newProps);\r\n\t};\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst files = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst { getMedia } = select(coreStore);\r\n\t\t\treturn data && '' === frm\r\n\t\t\t\t? data.map((obj) => getMedia(obj.id, { context: 'view' }))\r\n\t\t\t\t: null;\r\n\t\t},\r\n\t\t[data, frm]\r\n\t);\r\n\r\n\tif (frm !== '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('control-file-self-hosted'))}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type)\r\n\t\t\t\t? files.map((obj, key) => (\r\n\t\t\t\t\t\t<AtrcFile\r\n\t\t\t\t\t\t\tsrc={obj.url}\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))\r\n\t\t\t\t: null}\r\n\t\t\t<AtrcButtonGroup>\r\n\t\t\t\t<AtrcButton\r\n\t\t\t\t\tvariant='primary'\r\n\t\t\t\t\tclassName={classnames('at-gap at-flx at-flx-al-itm-ctr')}\r\n\t\t\t\t\tonClick={openMediaUploadFrame}\r\n\t\t\t\t\t{...omit(addButtonProps, 'text')}>\r\n\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\ticon={BsFile}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* eslint-disable-next-line no-nested-ternary */}\r\n\t\t\t\t\t{addButtonProps.text\r\n\t\t\t\t\t\t? addButtonProps.text\r\n\t\t\t\t\t\t: // eslint-disable-next-line no-nested-ternary\r\n\t\t\t\t\t\t\tdata.length > 0\r\n\t\t\t\t\t\t\t? frameProps.multiple\r\n\t\t\t\t\t\t\t\t? __('Replace files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t: __('Replace file', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: frameProps.multiple\r\n\t\t\t\t\t\t\t\t? __('Add files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t: __('Add file', 'atrc-prefix-atrc')}\r\n\t\t\t\t</AtrcButton>\r\n\t\t\t\t{!['urlOnly', 'buttonOnly'] && data.length > 0 ? (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\tvariant='uploads'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst newProps = {\r\n\t\t\t\t\t\t\t\tfrm: value.frm || '',\r\n\t\t\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tonChange(newProps);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\tclassName={classnames(AtrcPrefix('mr-5'))}\r\n\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\ticon={BsX}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{frameProps.multiple\r\n\t\t\t\t\t\t\t? __('Reset files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: __('Remove file', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t) : null}\r\n\t\t\t</AtrcButtonGroup>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst ExternalFile = (props) => {\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst { frm = '', url = '' } = value;\r\n\r\n\tif (frm === '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('ctrl-file-ext'))}>\r\n\t\t\t<AtrcFile src={url} />\r\n\t\t\t<AtrcText\r\n\t\t\t\tlabel={__('File URL', 'atrc-prefix-atrc')}\r\n\t\t\t\tvalue={url}\r\n\t\t\t\ttype='url'\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t/>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst AtrcControlFile = (props) => {\r\n\tconst {\r\n\t\tlabel = '',\r\n\t\tvalue = {},\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\ttype = '',\r\n\t\tonChange = () => {},\r\n\t\tallowSource = true,\r\n\t\tallowSelf = true,\r\n\t\tallowExternal = true,\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst [frm, setMediaFrom] = useState(value.frm);\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tif ('frm' === type) {\r\n\t\t\tsetMediaFrom(newVal);\r\n\t\t}\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst setExternal = (newVal) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\r\n\t\tdelete valueCloned.id;\r\n\t\tdelete valueCloned.size;\r\n\t\tdelete valueCloned.url;\r\n\r\n\t\tvalueCloned.url = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-file'),\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-file') + '-' + variant : '',\r\n\t\t\t\t'urlOnly' === type ? 'at-flx at-al-itm-end at-jfy-cont-btw at-gap' : ''\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && label ? (\r\n\t\t\t\t<AtrcLabel>{label}</AtrcLabel>\r\n\t\t\t) : null}\r\n\t\t\t{['urlOnly'].includes(type) ? (\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tvalue={value && value.data && value.data[0] && value.data[0].url}\r\n\t\t\t\t\ttype='url'\r\n\t\t\t\t\tonChange={(newVal) => {\r\n\t\t\t\t\t\tconst valueCloned = cloneDeep(value);\r\n\t\t\t\t\t\tif (!('frm' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.frm = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!('data' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.data = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!valueCloned.data[0]) {\r\n\t\t\t\t\t\t\tvalueCloned.data[0] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalueCloned.data[0].url = newVal;\r\n\t\t\t\t\t\tonChange(valueCloned);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tresetProps={{\r\n\t\t\t\t\t\tclassName: classnames('at-gap', 'at-flx-grw-1'),\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && allowSource ? (\r\n\t\t\t\t<AtrcSelect\r\n\t\t\t\t\tlabel={__('File source', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={frm}\r\n\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('Self hosted', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('External', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: 'external',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tonChange={(newVal) => setAttr(newVal, 'frm')}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowSelf ? (\r\n\t\t\t\t<SelfHostedFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\t{...defaultProps}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowExternal ? (\r\n\t\t\t\t<ExternalFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={setExternal}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default AtrcControlFile;\r\n"],"mappings":"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"}