{"version":3,"names":["_i18n","require","_element","_data","_coreData","_classnames","_interopRequireDefault","_bs","_lodash","_wrap","_label","_select2","_text","_button","_icon","_file","_notice","_buttonGroup","_prefixVars","_excluded","obj","__esModule","default","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","r","l","t","Symbol","iterator","e","u","a","f","next","done","push","value","return","isArray","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_extends","assign","bind","arguments","hasOwnProperty","apply","SelfHostedFile","props","_props$type","type","_props$value","frm","data","_props$addButtonProps","addButtonProps","_props$onChange","onChange","_value$frm","_value$data","wp","media","React","createElement","__","frameProps","useMemo","title","button","text","multiple","library","openMediaUploadFrame","frame","cloneDeep","on","attachments","state","get","toJSON","setMedia","open","id","newProps","files","useSelect","select","_select","coreStore","getMedia","map","context","className","classnames","AtrcPrefix","includes","src","url","variant","onClick","omit","icon","BsFile","BsX","ExternalFile","_props$value2","_props$onChange2","_value$frm2","_value$url","label","AtrcControlFile","_props$label","_props$value3","_props$variant","_props$className","_props$type2","_props$onChange3","_props$allowSource","allowSource","_props$allowSelf","allowSelf","_props$allowExternal","allowExternal","defaultProps","_useState","useState","_useState2","setMediaFrom","setAttr","newVal","valueCloned","setExternal","size","resetProps","options","_default","exports"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/control-file/index.js"],"sourcesContent":["/*Attributes Structure\r\nType Object\r\n{\r\n    frm = '',\r\n\tdata=[\r\n\t\t{\r\n\t\t\tid:'',\r\n\t\t\turl:'',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:'',\r\n\t\t\turl:'',\r\n\t\t}\r\n\t]\r\n}\r\n\r\nmap(obj, (currentValue, currentKey) => ( { value: key, label: key } ))\r\n\r\nwp_enqueue_media(); is needed to work this\r\n* */\r\n\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { useMemo, useState } from '@wordpress/element';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\nimport { BsFile, BsX } from 'react-icons/bs';\r\n\r\nimport { cloneDeep, omit } from 'lodash';\r\n\r\n/*Inbuilt*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcSelect from '../../atoms/select';\r\nimport AtrcText from '../../atoms/text';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcFile from '../../atoms/file';\r\n\r\n\r\nimport AtrcNotice from '../notice';\r\nimport AtrcButtonGroup from '../button-group';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local*/\r\nconst SelfHostedFile = (props) => {\r\n\tconst {\r\n\t\ttype = '',\r\n\t\tvalue = {\r\n\t\t\tfrm: '',\r\n\t\t\tdata: [],\r\n\t\t},\r\n\t\taddButtonProps = {},\r\n\t\tonChange = () => {},\r\n\t} = props;\r\n\r\n\tconst { frm = '', data = [] } = value;\r\n\r\n\tif (!(typeof wp !== 'undefined' && wp.media)) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice>\r\n\t\t\t\t{__('Add wp_enqueue_media(); on the page', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst frameProps = useMemo(() => {\r\n\t\tif (props.frameProps) {\r\n\t\t\treturn props.frameProps;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttitle: __('Select or upload file', 'atrc-prefix-atrc'),\r\n\t\t\tbutton: {\r\n\t\t\t\ttext: __('Select', 'atrc-prefix-atrc'),\r\n\t\t\t},\r\n\t\t\tmultiple: false,\r\n\t\t\tlibrary: {\r\n\t\t\t\ttype: 'image',\r\n\t\t\t},\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst openMediaUploadFrame = () => {\r\n\t\tconst frame = wp.media(cloneDeep(frameProps));\r\n\r\n\t\tframe.on('select', () => {\r\n\t\t\tconst attachments = frame.state().get('selection').toJSON();\r\n\t\t\tsetMedia(attachments);\r\n\t\t});\r\n\r\n\t\tframe.open();\r\n\t};\r\n\r\n\tconst setMedia = (media) => {\r\n\t\tif (!media || !media[0].id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst newProps = {\r\n\t\t\tfrm: value.frm || '',\r\n\t\t\tdata: [],\r\n\t\t};\r\n\r\n\t\tif (frameProps.multiple) {\r\n\t\t\tnewProps.data = media.slice(0);\r\n\t\t} else {\r\n\t\t\tnewProps.data.push(media[0]);\r\n\t\t}\r\n\t\tonChange(newProps);\r\n\t};\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst files = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst { getMedia } = select(coreStore);\r\n\t\t\treturn data && '' === frm\r\n\t\t\t\t? data.map((obj) => getMedia(obj.id, { context: 'view' }))\r\n\t\t\t\t: null;\r\n\t\t},\r\n\t\t[data, frm]\r\n\t);\r\n\r\n\tif (frm !== '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('control-file-self-hosted'))}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type)\r\n\t\t\t\t? files.map((obj, key) => (\r\n\t\t\t\t\t\t<AtrcFile\r\n\t\t\t\t\t\t\tsrc={obj.url}\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))\r\n\t\t\t\t: null}\r\n\t\t\t<AtrcButtonGroup>\r\n\t\t\t\t<AtrcButton\r\n\t\t\t\t\tvariant='primary'\r\n\t\t\t\t\tclassName={classnames('at-gap at-flx at-flx-al-itm-ctr')}\r\n\t\t\t\t\tonClick={openMediaUploadFrame}\r\n\t\t\t\t\t{...omit(addButtonProps, 'text')}>\r\n\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\ticon={BsFile}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* eslint-disable-next-line no-nested-ternary */}\r\n\t\t\t\t\t{addButtonProps.text\r\n\t\t\t\t\t\t? addButtonProps.text\r\n\t\t\t\t\t\t: // eslint-disable-next-line no-nested-ternary\r\n\t\t\t\t\t\t\tdata.length > 0\r\n\t\t\t\t\t\t\t? frameProps.multiple\r\n\t\t\t\t\t\t\t\t? __('Replace files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t: __('Replace file', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: frameProps.multiple\r\n\t\t\t\t\t\t\t\t? __('Add files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t: __('Add file', 'atrc-prefix-atrc')}\r\n\t\t\t\t</AtrcButton>\r\n\t\t\t\t{!['urlOnly', 'buttonOnly'] && data.length > 0 ? (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\tvariant='uploads'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst newProps = {\r\n\t\t\t\t\t\t\t\tfrm: value.frm || '',\r\n\t\t\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tonChange(newProps);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\tclassName={classnames(AtrcPrefix('mr-5'))}\r\n\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\ticon={BsX}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{frameProps.multiple\r\n\t\t\t\t\t\t\t? __('Reset files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: __('Remove file', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t) : null}\r\n\t\t\t</AtrcButtonGroup>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst ExternalFile = (props) => {\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst { frm = '', url = '' } = value;\r\n\r\n\tif (frm === '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('ctrl-file-ext'))}>\r\n\t\t\t<AtrcFile src={url} />\r\n\t\t\t<AtrcText\r\n\t\t\t\tlabel={__('File URL', 'atrc-prefix-atrc')}\r\n\t\t\t\tvalue={url}\r\n\t\t\t\ttype='url'\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t/>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst AtrcControlFile = (props) => {\r\n\tconst {\r\n\t\tlabel = '',\r\n\t\tvalue = {},\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\ttype = '',\r\n\t\tonChange = () => {},\r\n\t\tallowSource = true,\r\n\t\tallowSelf = true,\r\n\t\tallowExternal = true,\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst [frm, setMediaFrom] = useState(value.frm);\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tif ('frm' === type) {\r\n\t\t\tsetMediaFrom(newVal);\r\n\t\t}\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst setExternal = (newVal) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\r\n\t\tdelete valueCloned.id;\r\n\t\tdelete valueCloned.size;\r\n\t\tdelete valueCloned.url;\r\n\r\n\t\tvalueCloned.url = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-file'),\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-file') + '-' + variant : '',\r\n\t\t\t\t'urlOnly' === type ? 'at-flx at-al-itm-end at-jfy-cont-btw at-gap' : ''\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && label ? (\r\n\t\t\t\t<AtrcLabel>{label}</AtrcLabel>\r\n\t\t\t) : null}\r\n\t\t\t{['urlOnly'].includes(type) ? (\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tvalue={value && value.data && value.data[0] && value.data[0].url}\r\n\t\t\t\t\ttype='url'\r\n\t\t\t\t\tonChange={(newVal) => {\r\n\t\t\t\t\t\tconst valueCloned = cloneDeep(value);\r\n\t\t\t\t\t\tif (!('frm' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.frm = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!('data' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.data = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!valueCloned.data[0]) {\r\n\t\t\t\t\t\t\tvalueCloned.data[0] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalueCloned.data[0].url = newVal;\r\n\t\t\t\t\t\tonChange(valueCloned);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tresetProps={{\r\n\t\t\t\t\t\tclassName: classnames('at-gap', 'at-flx-grw-1'),\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && allowSource ? (\r\n\t\t\t\t<AtrcSelect\r\n\t\t\t\t\tlabel={__('File source', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={frm}\r\n\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('Self hosted', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('External', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: 'external',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tonChange={(newVal) => setAttr(newVal, 'frm')}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowSelf ? (\r\n\t\t\t\t<SelfHostedFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\t{...defaultProps}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowExternal ? (\r\n\t\t\t\t<ExternalFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={setExternal}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default AtrcControlFile;\r\n"],"mappings":"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"}