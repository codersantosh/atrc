{"version":3,"names":["__","useMemo","useState","useSelect","store","coreStore","classnames","BsFile","BsX","cloneDeep","omit","AtrcWrap","AtrcLabel","AtrcSelect","AtrcText","AtrcButton","AtrcIcon","AtrcFile","AtrcNotice","AtrcButtonGroup","AtrcPrefix","SelfHostedFile","props","_props$type","type","_props$value","value","frm","data","_props$addButtonProps","addButtonProps","_props$onChange","onChange","_value$frm","_value$data","wp","media","React","createElement","frameProps","title","button","text","multiple","library","openMediaUploadFrame","frame","on","attachments","state","get","toJSON","setMedia","open","id","newProps","slice","push","files","select","_select","getMedia","map","obj","context","className","includes","key","src","url","_extends","variant","onClick","icon","length","ExternalFile","_props$value2","_props$onChange2","_value$frm2","_value$url","label","AtrcControlFile","_props$label","_props$value3","_props$variant","_props$className","_props$type2","_props$onChange3","_props$allowSource","allowSource","_props$allowSelf","allowSelf","_props$allowExternal","allowExternal","defaultProps","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","setMediaFrom","setAttr","newVal","valueCloned","setExternal","size","resetProps","options"],"sources":["D:/wamp/www/atrc-package/atrc/packages/molecules/control-file/index.js"],"sourcesContent":["/*Attributes Structure\r\nType Object\r\n{\r\n    frm = '',\r\n\tdata=[\r\n\t\t{\r\n\t\t\tid:'',\r\n\t\t\turl:'',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:'',\r\n\t\t\turl:'',\r\n\t\t}\r\n\t]\r\n}\r\n\r\nmap(obj, (currentValue, currentKey) => ( { value: key, label: key } ))\r\n\r\nwp_enqueue_media(); is needed to work this\r\n* */\r\n\r\n/*WordPress*/\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nimport { useMemo, useState } from '@wordpress/element';\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/*Library*/\r\nimport classnames from 'classnames';\r\n\r\nimport { BsFile, BsX } from 'react-icons/bs';\r\n\r\nimport { cloneDeep, omit } from 'lodash';\r\n\r\n/*Inbuilt*/\r\nimport AtrcWrap from '../../atoms/wrap';\r\nimport AtrcLabel from '../../atoms/label';\r\nimport AtrcSelect from '../../atoms/select';\r\nimport AtrcText from '../../atoms/text';\r\nimport AtrcButton from '../../atoms/button';\r\nimport AtrcIcon from '../../atoms/icon';\r\nimport AtrcFile from '../../atoms/file';\r\n\r\n\r\nimport AtrcNotice from '../notice';\r\nimport AtrcButtonGroup from '../button-group';\r\n\r\n/*Prefix*/\r\nimport AtrcPrefix from '../../prefix-vars';\r\n\r\n/*Local*/\r\nconst SelfHostedFile = (props) => {\r\n\tconst {\r\n\t\ttype = '',\r\n\t\tvalue = {\r\n\t\t\tfrm: '',\r\n\t\t\tdata: [],\r\n\t\t},\r\n\t\taddButtonProps = {},\r\n\t\tonChange = () => {},\r\n\t} = props;\r\n\r\n\tconst { frm = '', data = [] } = value;\r\n\r\n\tif (!(typeof wp !== 'undefined' && wp.media)) {\r\n\t\treturn (\r\n\t\t\t<AtrcNotice>\r\n\t\t\t\t{__('Add wp_enqueue_media(); on the page', 'atrc-prefix-atrc')}\r\n\t\t\t</AtrcNotice>\r\n\t\t);\r\n\t}\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst frameProps = useMemo(() => {\r\n\t\tif (props.frameProps) {\r\n\t\t\treturn props.frameProps;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttitle: __('Select or upload file', 'atrc-prefix-atrc'),\r\n\t\t\tbutton: {\r\n\t\t\t\ttext: __('Select', 'atrc-prefix-atrc'),\r\n\t\t\t},\r\n\t\t\tmultiple: false,\r\n\t\t\tlibrary: {\r\n\t\t\t\ttype: 'image',\r\n\t\t\t},\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst openMediaUploadFrame = () => {\r\n\t\tconst frame = wp.media(cloneDeep(frameProps));\r\n\r\n\t\tframe.on('select', () => {\r\n\t\t\tconst attachments = frame.state().get('selection').toJSON();\r\n\t\t\tsetMedia(attachments);\r\n\t\t});\r\n\r\n\t\tframe.open();\r\n\t};\r\n\r\n\tconst setMedia = (media) => {\r\n\t\tif (!media || !media[0].id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst newProps = {\r\n\t\t\tfrm: value.frm || '',\r\n\t\t\tdata: [],\r\n\t\t};\r\n\r\n\t\tif (frameProps.multiple) {\r\n\t\t\tnewProps.data = media.slice(0);\r\n\t\t} else {\r\n\t\t\tnewProps.data.push(media[0]);\r\n\t\t}\r\n\t\tonChange(newProps);\r\n\t};\r\n\r\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\tconst files = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst { getMedia } = select(coreStore);\r\n\t\t\treturn data && '' === frm\r\n\t\t\t\t? data.map((obj) => getMedia(obj.id, { context: 'view' }))\r\n\t\t\t\t: null;\r\n\t\t},\r\n\t\t[data, frm]\r\n\t);\r\n\r\n\tif (frm !== '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('control-file-self-hosted'))}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type)\r\n\t\t\t\t? files.map((obj, key) => (\r\n\t\t\t\t\t\t<AtrcFile\r\n\t\t\t\t\t\t\tsrc={obj.url}\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))\r\n\t\t\t\t: null}\r\n\t\t\t<AtrcButtonGroup>\r\n\t\t\t\t<AtrcButton\r\n\t\t\t\t\tvariant='primary'\r\n\t\t\t\t\tclassName={classnames('at-gap at-flx at-flx-al-itm-ctr')}\r\n\t\t\t\t\tonClick={openMediaUploadFrame}\r\n\t\t\t\t\t{...omit(addButtonProps, 'text')}>\r\n\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\ticon={BsFile}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* eslint-disable-next-line no-nested-ternary */}\r\n\t\t\t\t\t{addButtonProps.text\r\n\t\t\t\t\t\t? addButtonProps.text\r\n\t\t\t\t\t\t: // eslint-disable-next-line no-nested-ternary\r\n\t\t\t\t\t\t\tdata.length > 0\r\n\t\t\t\t\t\t\t? frameProps.multiple\r\n\t\t\t\t\t\t\t\t? __('Replace files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t: __('Replace file', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: frameProps.multiple\r\n\t\t\t\t\t\t\t\t? __('Add files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t\t: __('Add file', 'atrc-prefix-atrc')}\r\n\t\t\t\t</AtrcButton>\r\n\t\t\t\t{!['urlOnly', 'buttonOnly'] && data.length > 0 ? (\r\n\t\t\t\t\t<AtrcButton\r\n\t\t\t\t\t\tvariant='uploads'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst newProps = {\r\n\t\t\t\t\t\t\t\tfrm: value.frm || '',\r\n\t\t\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tonChange(newProps);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<AtrcIcon\r\n\t\t\t\t\t\t\tclassName={classnames(AtrcPrefix('mr-5'))}\r\n\t\t\t\t\t\t\ttype='bootstrap'\r\n\t\t\t\t\t\t\ticon={BsX}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{frameProps.multiple\r\n\t\t\t\t\t\t\t? __('Reset files', 'atrc-prefix-atrc')\r\n\t\t\t\t\t\t\t: __('Remove file', 'atrc-prefix-atrc')}\r\n\t\t\t\t\t</AtrcButton>\r\n\t\t\t\t) : null}\r\n\t\t\t</AtrcButtonGroup>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst ExternalFile = (props) => {\r\n\tconst { value = {}, onChange = () => {} } = props;\r\n\r\n\tconst { frm = '', url = '' } = value;\r\n\r\n\tif (frm === '') {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AtrcWrap className={classnames(AtrcPrefix('ctrl-file-ext'))}>\r\n\t\t\t<AtrcFile src={url} />\r\n\t\t\t<AtrcText\r\n\t\t\t\tlabel={__('File URL', 'atrc-prefix-atrc')}\r\n\t\t\t\tvalue={url}\r\n\t\t\t\ttype='url'\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t/>\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nconst AtrcControlFile = (props) => {\r\n\tconst {\r\n\t\tlabel = '',\r\n\t\tvalue = {},\r\n\t\tvariant = '',\r\n\t\tclassName = '',\r\n\t\ttype = '',\r\n\t\tonChange = () => {},\r\n\t\tallowSource = true,\r\n\t\tallowSelf = true,\r\n\t\tallowExternal = true,\r\n\t\t...defaultProps\r\n\t} = props;\r\n\r\n\tconst [frm, setMediaFrom] = useState(value.frm);\r\n\r\n\tconst setAttr = (newVal, type) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\t\tvalueCloned[type] = newVal;\r\n\t\tif ('frm' === type) {\r\n\t\t\tsetMediaFrom(newVal);\r\n\t\t}\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\tconst setExternal = (newVal) => {\r\n\t\tconst valueCloned = cloneDeep(value);\r\n\r\n\t\tdelete valueCloned.id;\r\n\t\tdelete valueCloned.size;\r\n\t\tdelete valueCloned.url;\r\n\r\n\t\tvalueCloned.url = newVal;\r\n\t\tonChange(valueCloned);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AtrcWrap\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tAtrcPrefix('ctrl-file'),\r\n\t\t\t\tclassName,\r\n\t\t\t\tvariant ? AtrcPrefix('ctrl-file') + '-' + variant : '',\r\n\t\t\t\t'urlOnly' === type ? 'at-flx at-al-itm-end at-jfy-cont-btw at-gap' : ''\r\n\t\t\t)}\r\n\t\t\t{...defaultProps}>\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && label ? (\r\n\t\t\t\t<AtrcLabel>{label}</AtrcLabel>\r\n\t\t\t) : null}\r\n\t\t\t{['urlOnly'].includes(type) ? (\r\n\t\t\t\t<AtrcText\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tvalue={value && value.data && value.data[0] && value.data[0].url}\r\n\t\t\t\t\ttype='url'\r\n\t\t\t\t\tonChange={(newVal) => {\r\n\t\t\t\t\t\tconst valueCloned = cloneDeep(value);\r\n\t\t\t\t\t\tif (!('frm' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.frm = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!('data' in valueCloned)) {\r\n\t\t\t\t\t\t\tvalueCloned.data = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!valueCloned.data[0]) {\r\n\t\t\t\t\t\t\tvalueCloned.data[0] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalueCloned.data[0].url = newVal;\r\n\t\t\t\t\t\tonChange(valueCloned);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tresetProps={{\r\n\t\t\t\t\t\tclassName: classnames('at-gap', 'at-flx-grw-1'),\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{!['urlOnly', 'buttonOnly'].includes(type) && allowSource ? (\r\n\t\t\t\t<AtrcSelect\r\n\t\t\t\t\tlabel={__('File source', 'atrc-prefix-atrc')}\r\n\t\t\t\t\tvalue={frm}\r\n\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('Self hosted', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: __('External', 'atrc-prefix-atrc'),\r\n\t\t\t\t\t\t\tvalue: 'external',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tonChange={(newVal) => setAttr(newVal, 'frm')}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowSelf ? (\r\n\t\t\t\t<SelfHostedFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\t{...defaultProps}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t\t{allowExternal ? (\r\n\t\t\t\t<ExternalFile\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={setExternal}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</AtrcWrap>\r\n\t);\r\n};\r\n\r\nexport default AtrcControlFile;\r\n"],"mappings":"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"}